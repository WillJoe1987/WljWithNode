var indexTileExtraData,indexTileExtra,indexTileExtraItem;!function(){var a={};window.Wlj||(window.Wlj=a),SyncAjax=function(){var a=this;a.initialize()},Ext.extend(SyncAjax,Ext.util.Observable),SyncAjax.prototype.disableCachingParam="_dc",SyncAjax.prototype.method="GET",SyncAjax.prototype.success=!1,SyncAjax.prototype.failure=!1,SyncAjax.prototype.initialize=function(){this.addEvents({beforeRequest:!0,afterRequest:!0,requestException:!0,requestSucess:!0,requestFailure:!0})},SyncAjax.prototype.request=function(a){var c,e,b=this;try{if(window.ActiveXObject?c=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(c=new XMLHttpRequest),a.url=a.url.indexOf("?")>0?a.url+"&"+Ext.urlEncode(a.params):a.url+"?"+Ext.urlEncode(a.params),a.url=Ext.urlAppend(a.url,this.disableCachingParam+"="+(new Date).getTime()),c.open(b.method,a.url,!1),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e=b.fireEvent("beforeRequest",this),e===!1)return Ext.error("beforeRequest事件阻止了SyncAjax 请求!"),!1;c.send(null),b.fireEvent("afterRequest",this),200==c.status?(b=this,b.fireEvent("requestSucess",this),Ext.isFunction(a.success)&&a.success(c)):(b=this,Ext.log("Wlj.SyncAjax.syncRequest异常:["+c.statusText+"]"),b.fireEvent("requestFailure",this),Ext.isFunction(a.failure)&&a.failure(c))}catch(f){Ext.log("Wlj.syncRequest异常"),b.fireEvent("syncException",this)}},window.Wlj.SyncAjax=new SyncAjax}(),Wlj.version={major:"1",subject:"0",patch:"0",fullVersion:"1.0.0",fullName:"Walk Lonely Javascript",buildDate:"20131104",describe:"Release 1.0.0 beta, based on Ext 3.3.1"},Wlj.tools={namespace:function(){var a,b;return Ext.each(arguments,function(c){b=c.split("."),a=window[b[0]]=window[b[0]]||{},Ext.each(b.slice(1),function(b){a=a[b]=a[b]||{}})}),a},imports:function(a,b){Ext.isArray(a)?0==a.length?Ext.isFunction(b)&&b.call(Wlj):Wlj.tools.load(a.pop(),function(){Wlj.tools.imports(a,b)}):Wlj.tools.load(a,b)},load:function(a,b){Wlj.SyncAjax.request({url:basepath+a,callback:b,success:function(a){window.execScript?window.execScript(a.responseText):window.eval(a.responseText),Ext.isFunction(b)&&b.call(Wlj)}})}},window.imports=Wlj.tools.imports,Ext.ns("Wlj.memorise"),Wlj.memorise.Tile=function(){this.tiles=new Ext.util.MixedCollection,this.tilesData=new Ext.util.MixedCollection;var a=this;this.tiles.on("add",function(){a.onAdd()}),this.tiles.on("remove",function(){a.renderIndex--}),this.tilesData.on("add",function(){a.onAddData()}),this.tilesData.on("remove",function(){a.dataLoadIndex--}),Wlj.memorise.Tile.superclass.constructor.call(this),this.renderIndex=0,this.dataLoadIndex=0,this.loading=!1,this.dataLoading=!1},Ext.extend(Wlj.memorise.Tile,Ext.util.Observable,{addTile:function(a){this.tiles.add(a)},addDataCfg:function(a){this.tilesData.add(a)},loadJs:function(){var b,c,a=this;return a.loading=!0,(b=a.tiles.itemAt(a.renderIndex))?(b.jsUrl&&b.tileSize?(c=b.el.getViewSize(!1),Ext.Ajax.request({method:"get",url:basepath+b.jsUrl,success:function(d){b.removeAll(),b.contentObject=window.eval?window.eval(d.responseText):window.execScript(d.responseText),b.contentObject&&(Ext.isArray(b.contentObject)?Ext.each(b.contentObject,function(a){a.setSize(c.width,c.height)}):b.contentObject.setSize(c.width,c.height),b.add(b.contentObject),b.doLayout()),a.renderIndex++,a.loadJs()},failure:function(){a.renderIndex++,a.loadJs()}})):(a.renderIndex++,a.loadJs()),void 0):(a.loading=!1,a.loadData(),!1)},loadData:function(){function c(c){a.dataLoadIndex++,Ext.isFunction(b.dataCb)&&b.dataCb.call(b.controlPanel,b.controlPanel,c),a.loadData()}var b,a=this;return a.dataLoading=!0,(b=a.tilesData.itemAt(a.dataLoadIndex))?(b.store?b.store.load({params:{start:0,limit:b.controlPanel.dataSize?b.controlPanel.dataSize:7},callback:function(){c()}}):(Ext.apply(b,{success:function(a){c(a.responseText)},failure:function(){c()}}),Ext.Ajax.request(b)),void 0):(a.dataLoading=!1,!1)},onAddData:function(){var b=this;b.loading||b.dataLoading||b.loadData()},onAdd:function(){var b=this;b.loading||b.loadJs()},getTileBy:function(){}}),Wlj.memorise.TileController=new Wlj.memorise.Tile,Wlj.TileMgr=Wlj.memorise.TileController,Wlj.memorise.Task=function(){this.taskIdGen="task_tile_",this.tasks=new Ext.util.MixedCollection;var a=this;this.tasks.on("add",function(b,c){a.onAddTask(c)})},Ext.extend(Wlj.memorise.Task,Ext.util.Observable,{addTask:function(a){this.tasks.add(a)},removeTask:function(a){if(this.windowObject){var b=this.windowObject.get(this.taskIdGen+a.id);b&&b.ownerCt.remove(b,!0)}this.tasks.remove(a)},getTask:function(a){return this.tasks.get(a)},onAddTask:function(a){this.toFront(),this.windowObject&&(this.windowObject.add(this.createTaskTile(a,!1)),this.windowObject.doLayout())},toFront:function(){this.windowObject&&this.windowObject.toFront()},createTaskTile:function(a,b){var c=this,d=new Wlj.widgets.search.tile.Tile({id:c.taskIdGen+a.id,cls:"tile_c1",baseMargin:2,ownerW:10,ownerH:20,baseSize:682,baseHeight:34,baseWidth:20,taskObject:a,pos_size:{TX:0,TY:c.tasks.indexOf(a),TH:1,TW:1},html:"<br>&nbsp;"+a.name,listeners:{afterrender:function(a){var c=b?150*a.ownerCt.items.indexOf(a):0;setTimeout(function(){a.el.animate({width:{from:20,to:682}},.35,null,"easeOut","run")},c)}},removeThis:function(){var d,e,b=this.ownerCt.items.indexOf(this),c=this.ownerCt;for(this.ownerCt.remove(this,!0),d=b;d<c.items.getCount();d++)e=c.items.itemAt(d),e.moveToPoint({x:e.pos_size.TX,y:e.pos_size.TY-1});a.close()}});return d},showTasks:function(){function b(){var b=[];return a.tasks.each(function(c){b.push(a.createTaskTile(c,!0))}),b}var a=this;return this.windowObject?(this.windowObject.toFront(!0),void 0):(this.windowObject=new Ext.Window({id:"_TASK_MANAGER",top:200,left:200,title:"任务管理器",height:400,width:700,appObject:_APP,manager:_APP.taskBar.windowManager}),this.windowObject.on("show",function(a){a.add(b()),a.doLayout()}),this.windowObject.on("close",function(){a.windowObject=!1}),this.windowObject.show(),void 0)}}),Wlj.memorise.TaskController=new Wlj.memorise.Task,Wlj.TaskMgr=Wlj.memorise.TaskController,Wlj.memorise.Service=function(){this.services=new Ext.util.MixedCollection},Ext.extend(Wlj.memorise.Service,Ext.util.Observable,{addService:function(a){this.services.add(a)},removeService:function(){},stopService:function(){},createServiceWindow:function(){function c(){var b=[];return a.services.each(function(c){var g,d=a.services.indexOf(c);parseInt(d/7),parseInt(d%7),g=new Wlj.widgets.search.service.PageServiceItem({ownerH:20,ownerW:100,serviceObject:c}),b.push(g)}),b}var a=this,b=parseInt(a.services.getCount()/7)+1;this.serviceWindow=new Ext.Window({maximized:!0,closeAction:"hide",autoScroll:!0,title:"服务管理器",items:[new Wlj.widgets.search.service.PageServiceContainer({width:68*b,items:c()})],listeners:{hide:function(){Ext.getBody().unmask()}}})},showServiceWindow:function(){this.serviceWindow||this.createServiceWindow(),Ext.getBody().mask(),this.serviceWindow.show(),this.serviceWindow.el.setOpacity(.9)},findServiceByID:function(a){return this.services.get("service_"+a)}}),Wlj.memorise.ServiceController=new Wlj.memorise.Service,Wlj.ServiceMgr=Wlj.memorise.ServiceController,Ext.ns("Wlj.view"),Wlj.view.View=Ext.extend(Ext.util.Observable,{viewId:"view$-$",resId:0,viewType:0,viewUrl:"",constructor:function(a){Wlj.view.View.superclass.constructor.call(this,a)},openViewWindow:function(a,b,c){this.viewType=a,this.resId=this.viewId+this.viewType+"$-$"+b,_APP.taskBar.openWindow({name:Wlj.view.View.VIEW_PRE_NAME[this.viewType]+c,action:basepath+Wlj.view.View.VIEW_BASE_URL[this.viewType],resId:this.resId,id:"task_"+this.resId,serviceObject:!1})}}),Wlj.view.ViewController=new Wlj.view.View,Wlj.ViewMgr=Wlj.view.ViewController,Wlj.view.View.VIEW_BASE_URL=["/contents/frameControllers/view/Wlj-custview-base.jsp","/contents/frameControllers/view/Wlj-custgroup-base.jsp","/contents/frameControllers/view/Wlj-custgroup-base.jsp","/contents/frameControllers/view/Wlj-custgroup-base.jsp","/contents/frameControllers/view/Wlj-custgroup-base.jsp","/contents/frameControllers/view/Wlj-custgroup-base.jsp","/contents/frameControllers/view/Wlj-custgroup-base.jsp"],Wlj.view.View.VIEW_PRE_NAME=["客户：","客户群：","集团：","客户经理：","产品：","团队：","财富管理："],Ext.ns("Wlj.search"),Wlj.search.App=function(){var a=this;a.userId=JsContext._userId,a.orgName=JsContext._unitname,a.orgId=JsContext._orgId,a.userName=__userCname,a.roleNames=__roleNames,a.defaultTileGroupCount=APPUTIL.defaultTileGroupCount,a.defaultTileGroupCount<1&&(a.defaultTileGroupCount=1),a.viewAdjust=APPUTIL.viewAdjust,a.autoCreateGroup=APPUTIL.autoCreateGroup,a.defaultTileGroupOwnerH=APPUTIL.defaultTileGroupOwnerH,a.defaultTileGroupOwnerW=APPUTIL.defaultTileGroupOwnerW,a.defaultIndexTileWidthUnit=APPUTIL.defaultIndexTileWidthUnit,a.defaultIndexTileHeightUnit=APPUTIL.defaultIndexTileHeightUnit,a.defaultIndexTileMarginUnit=APPUTIL.defaultIndexTileMarginUnit,a.containerLeft=APPUTIL.containerLeft,a.groupMargin=APPUTIL.groupMargin,a.groupWidth=a.defaultIndexTileWidthUnit*a.defaultTileGroupOwnerW+2*a.defaultIndexTileMarginUnit*(a.defaultTileGroupOwnerW+3),a.groupHeight=a.defaultIndexTileHeightUnit*a.defaultTileGroupOwnerH+2*a.defaultIndexTileMarginUnit*(a.defaultTileGroupOwnerH+3),a.headerHeight=APPUTIL.headerHeight,a.headerTopMargin=APPUTIL.headerTopMargin,a.headerButtomMargin=APPUTIL.headerButtomMargin,a.taskbarHeight=APPUTIL.taskbarHeight,"menuRoot"===APPUTIL.headerFunctions?(a.headerType="menu",a.headerRoot="0"):0===APPUTIL.headerFunctions.indexOf("res")?(a.headerType="menu",a.headerRoot=APPUTIL.headerFunctions.split(":")[1]):(a.headerType="funtion",a.headerRoot=Wlj.search.App.HEADERBUTTONS),this.menuHeaderCount=APPUTIL.menuHeaderCount,a.size=Ext.getBody().getViewSize(),a.buildSizePosition(),a.viewAdjust&&a.viewSizeAdjust(),a.initSecurityBooter(),a.needSearchArea=APPUTIL.needSearchArea},Wlj.search.App.prototype.initMenus=function(){var a=this;Ext.Ajax.request({url:basepath+"/indexinit.json",method:"GET",success:function(b){var f=Ext.util.JSON.decode(b.responseText).json.data;a.menus=f,a.bootViews()},failure:function(){}}),a.reqIndex=0},Wlj.search.App.prototype.bootViews=function(){var a,b;this.bootHeader(),this.bootTiles(),this.needSearchArea&&this.bootSearchArea(),this.bootTaskBar(),this.bootServices(),this.bootTheme(),a=[],a=this.needSearchArea?[this.headerBar,this.tileContainer,this.mainContainer,this.taskBar]:[this.headerBar,this.tileContainer,this.taskBar],this.viewPort=new Ext.Viewport({items:a,cls:"main_bg"}),this.resetContaienrWidth(),this.viewShowAdjust(),b=this,window.onresize=function(){b.size=Ext.getBody().getViewSize(),b.viewSizeAdjust(),b.tileContainer.setHeight(b.tileContainerHeight)}},Wlj.search.App.prototype.bootHeader=function(){var b,c,d,e,f,a=this;if(this.userInfoComponent=new Wlj.widgets.search.header.UserInfo({userName:a.userName,userRole:a.roleNames,userOrg:a.orgName,appObject:this}),"funtion"===a.headerType)this.headerFunctions=new Wlj.widgets.search.header.MainFunction({items:Wlj.search.App.HEADERBUTTONS,appObject:this});else if("menu"===a.headerType){for(b=a.getMenuDataByProperty("PARENT_ID",a.headerRoot),c=[],APPUTIL.needStartOBack&&(c.push(Wlj.search.App.HEADERBUTTONS[0]),c.push(Wlj.search.App.HEADERBUTTONS[1])),d=0;d<b.length&&d<a.menuHeaderCount;d++)e=b[d],f={name:e.NAME,acls:"lv1",iconcls:"icon"+e.ICON,cssText:"",cls:"",menuRoot:e.ID,functionName:"Wlj.widgets.search.header.MenuFunction"},c.push(f);this.headerFunctions=new Wlj.widgets.search.header.MainFunction({items:c,appObject:this})}this.headerBar=new Wlj.widgets.search.header.HeadBar({y:this.headerTopMargin,height:this.headerHeight,items:[this.headerFunctions,this.userInfoComponent],appObject:this})},Wlj.search.App.prototype.bootTiles=function(){var a=this;this.tileContainer=new Wlj.widgets.search.tile.TileContainer({height:a.tileContainerHeight+1,items:[],x:a.containerLeft,y:a.containerTop,appObject:this}),a.createGroup(a.defaultTileGroupCount-1),Ext.Ajax.request({url:basepath+"/usertile.json",method:"GET",success:function(b){a.tileData=Ext.decode(b.responseText).json.data,Ext.each(a.tileData,function(b){var d,c=a.getMenuDataByProperty("MOD_FUNC_ID",b.MODULE_ID);c&&c.length>0&&(c[0].TILE_COLOR=b.TILE_COLOR?b.TILE_COLOR:c[0].TILE_COLOR,c[0].TILE_LOGO=b.TILE_ICON?b.TILE_ICON:c[0].TILE_LOGO,delete b.TILE_ICON,Ext.apply(b,c[0])),b.DEFAULT_URL=b.DEFAULT_URL?b.DEFAULT_URL:b.SPARE_ONE,d=b.GROUP_SEQ?parseInt(b.GROUP_SEQ,10):0,(a.autoCreateGroup||d<a.defaultTileGroupCount)&&a.createTile(a.createTileCfg(b),d)}),a.tileContainer.doLayout(),a.resetContaienrWidth()}})},Wlj.search.App.prototype.bootSearchArea=function(){var a=this;this.searchComponent=new Wlj.widgets.search.search.SearchComponent({appObject:this}),this.shortTypeComponent=new Wlj.widgets.search.search.ShortTitle({name:"我的常用功能",appObject:this}),this.shortContainer=new Wlj.widgets.search.search.ShortContainer({items:[this.shortTypeComponent],appObject:this,listeners:{afterrender:function(){Ext.Ajax.request({url:basepath+"/comfunctionset.json",method:"GET",success:function(b){var c,d,e,f,g,h;for(userSetting=Ext.util.JSON.decode(b.responseText),c=userSetting.returns.data,d=8>c.length?c.length:8,e=0;d>e;e++)f=a.getMenuDataByProperty("ID",c[e].MODULE_ID),f&&f.length>0&&(g={},g.id="short_"+f[0].ID,g.name=f[0].NAME,g.action=f[0].ACTION,g.appObject=a,g.icon=f[0].TILE_LOGO?f[0].TILE_LOGO:"ico-t-"+Math.floor(100*Math.random()+1),g.tileColor=f[0].TILE_COLOR?f[0].TILE_COLOR:"tile_c"+Math.floor(10*Math.random()+1),g.autoEl={tag:"div",cls:"tile w190h1 short_fun "+g.tileColor},g.menuData=f[0],h=new Wlj.widgets.search.search.ModeShort(g),4==e&&(h.style={marginLeft:140}),a.shortContainer.add(h));a.shortContainer.doLayout()}})}}}),this.mainContainer=new Wlj.widgets.search.search.SearchMainContainer({hidden:!0,hieght:a.searchContainerTop+1,y:a.searchContainerTop,items:[this.searchComponent,this.shortContainer],appObject:this})},Wlj.search.App.prototype.bootTaskBar=function(){this.taskBar=new Wlj.widgets.search.window.TaskBar({hidden:!!this.needSearchArea,height:this.taskbarHeight,appObject:this}),this.thumberContainer=new Wlj.widgets.search.window.TaskThumberContainer({renderTo:Ext.getBody(),manager:this.taskBar.windowManager})},Wlj.search.App.prototype.bootServices=function(){this.ServiceMgr=Wlj.ServiceMgr,Ext.each(this.menus,function(a){a.ACTION&&new Wlj.widgets.search.service.PageService(a)}),Wlj.ServiceMgr.createServiceWindow()},Wlj.search.App.prototype.bootTheme=function(){Ext.getBody().applyStyles({background:"url("+basepath+__background+") fixed center"})},Wlj.search.App.prototype.onContextMenu=function(a,b){b.length>0&&new Ext.menu.Menu({items:b}).showAt(a.getXY())},Wlj.search.App.prototype.resetContaienrWidth=function(){var a=this.tileContainer.items.length,b=this.groupWidth*a+this.groupMargin*(a+1);this.tileContainer.layoutEl.style.width=b+"px"},Wlj.search.App.prototype.viewSizeAdjust=function(){var d,e,f,b=26,c=0;this.groupHeight>this.tileContainerHeight-20&&(d=this.groupHeight-this.tileContainerHeight+20,e=this.headerTopMargin-b,f=this.headerButtomMargin-c,e>=d?this.headerTopMargin=this.headerTopMargin-d:(this.headerButtomMargin=f>=d-e?this.headerButtomMargin-(d-e):c,this.headerTopMargin=b),this.buildSizePosition())},Wlj.search.App.prototype.viewShowAdjust=function(){var b,a=this;a.autoCreateGroup===!1&&1===a.defaultTileGroupCount&&a.groupWidth<a.size.width-20&&(b=parseInt((a.size.width-a.groupWidth)/2),a.tileContainer.items.first().el.applyStyles({left:b+"px"}))},Wlj.search.App.prototype.buildSizePosition=function(){var a=this;a.tileContainerHeight=a.size.height-a.headerTopMargin-a.headerHeight-a.headerButtomMargin,APPUTIL.needSearchArea||(a.tileContainerHeight=a.tileContainerHeight-a.taskbarHeight),a.containerTop=a.headerTopMargin+a.headerButtomMargin,a.searchContainerHeight=a.tileContainerHeight,a.searchContainerTop=a.containerTop},Wlj.search.App.prototype.openWindow=function(a){this.ShowSearchArea(),this.taskBar.openWindow(a)},Wlj.search.App.prototype.ShowSearchArea=function(){return this.needSearchArea?(this.tileContainer.hide(),this.mainContainer.show(),this.taskBar.show(),this.headerFunctions.headerFun.get("backFunction")&&this.headerFunctions.headerFun.get("backFunction").show(),this.headerFunctions.headerFun.get("startFunction")&&this.headerFunctions.headerFun.get("startFunction").hide(),void 0):!1},Wlj.search.App.prototype.HideSearchArea=function(){return this.needSearchArea?(this.tileContainer.show(),this.mainContainer.hide(),this.taskBar.hide(),this.headerFunctions.headerFun.get("backFunction")&&this.headerFunctions.headerFun.get("backFunction").hide(),this.headerFunctions.headerFun.get("startFunction")&&this.headerFunctions.headerFun.get("startFunction").show(),void 0):!1},Wlj.search.App.prototype.getMenuDataByProperty=function(a,b){var c=[],d=this.menus;return a&&b?(Ext.each(d,function(d){if(d[a]==b){var e={};Ext.apply(e,d),c.push(e)}}),0==c.length?!1:c):!1},Wlj.search.App.prototype.findMenuDataByProperty=function(a,b){var c=[],d=this.menus;return a&&b?(Ext.each(d,function(d){d[a]==b&&c.push(d)}),0==c.length?!1:c):!1},Wlj.search.App.prototype.createRootMenuCfg=function(){return this.createSubMenuCfg("0")},Wlj.search.App.prototype.createSubMenuCfg=function(a){var b=[],c=this,d=this.getMenuDataByProperty("PARENT_ID",a);return d&&Ext.each(d,function(a){a.id="mmid_"+a.ID,a.name=a.NAME,a.isLeaf=c.findMenuDataByProperty("PARENT_ID",a.ID)===!1,a.action=a.ACTION,a.appObject=c,b.push(a)}),0==b.length?!1:b},Wlj.search.App.prototype.createGroup=function(a){var f,g,b=this,c=b.tileContainer,d=c.items.length,e=!1;if("number"!=typeof a)f=new Wlj.widgets.search.tile.TileGroup({id:"group_"+d,index:d,items:[],width:this.groupWidth,height:this.groupHeight,groupMargin:this.groupMargin,appObject:this}),e=f;else{if(a=parseInt(a),a>=d)for(g=d;a>=g;g++)c.add(new Wlj.widgets.search.tile.TileGroup({id:"group_"+g,index:g,items:[],width:this.groupWidth,height:this.groupHeight,groupMargin:this.groupMargin,appObject:this}));e=c.items.itemAt(a)}return c.doLayout(),e},Wlj.search.App.prototype.createTile=function(a,b){var e,c=this,d=b;"undefined"==typeof d&&(d=0),e=c.createGroup(d),e.add(new Wlj.widgets.search.tile.IndexTile(a))},Wlj.search.App.prototype.createTileCfg=function(a,b){var e,f,g,h,i,j,k,l,m,n,c=this,d=a;return Ext.applyIf(d,b),e=parseInt(d.POS_X?d.POS_X:0,10),f=parseInt(d.POS_Y?d.POS_Y:0,10),g=d.TILE_LOGO?d.TILE_LOGO:"ico-t-"+Math.floor(100*Math.random()+1),h=d.TILE_SIZE?d.TILE_SIZE:d.DEFAULT_SIZE?d.DEFAULT_SIZE:!1,i=d.TILE_COLOR?d.TILE_COLOR:"tile_c"+Math.floor(10*Math.random()+1),j=d.DEFAULT_URL?d.DEFAULT_URL:!1,k=d.NAME,l="tile "+i,j||(h=!1),m=c.translateSize(h),n={tileLogo:g,tileSize:h,tileName:k,tileColor:i,baseWidth:c.defaultIndexTileWidthUnit,baseHeight:c.defaultIndexTileHeightUnit,baseMargin:c.defaultIndexTileMarginUnit,ownerW:c.defaultTileGroupOwnerW,ownerH:c.defaultTileGroupOwnerH,autoEl:{tag:"div",cls:l},jsUrl:j,pos_size:{TW:m.TW,TH:m.TH,TX:e,TY:f},appObject:c,menuData:d}},Wlj.search.App.prototype.translateSize=function(a){switch(a){case"TS_00":return{TW:6,TH:3};case"TS_01":return{TW:3,TH:3};case"TS_02":return{TW:2,TH:3};case"TS_03":return{TW:3,TH:2};case"TS_04":return{TW:1,TH:3};case"TS_05":return{TW:3,TH:1};case"TS_06":return{TW:2,TH:2};case"TS_07":return{TW:1,TH:2};case"TS_08":return{TW:2,TH:1};default:return{TW:1,TH:1}}},Wlj.search.App.prototype.translateSizeCode=function(a,b){var c=[a,b];switch(Ext.encode(c)){case Ext.encode([6,3]):return"TS_00";case Ext.encode([3,3]):return"TS_01";case Ext.encode([2,3]):return"TS_02";case Ext.encode([3,2]):return"TS_03";case Ext.encode([1,3]):return"TS_04";case Ext.encode([3,1]):return"TS_05";case Ext.encode([2,2]):return"TS_06";case Ext.encode([1,2]):return"TS_07";case Ext.encode([2,1]):return"TS_08";default:return"000"}},Wlj.search.App.prototype.securityBooter=null,Wlj.search.App.prototype.initSecurityBooter=function(){var a=this;return null==a.securityBooter&&(a.securityBooter=new Com.yucheng.crm.security.SecurityBooter(a)),a.securityBooter},Wlj.search.App.prototype.showTaskThumber=function(a){var b=a.getGridThumber();return b?(this.thumberContainer.show(),this.thumberContainer.toFront(),this.thumberContainer.setTask(a),void 0):!1},Wlj.search.App.prototype.hideTaskThumber=function(){this.thumberContainer.hide()},Ext.ns("Wlj.widgets.search.header"),Wlj.widgets.search.header.HeadBar=Ext.extend(Ext.Container,{autoEl:{tag:"div"},cls:"menu_menu_con",backgroundTpl:new Ext.XTemplate('<div class="main_menu"></div>'),defaultType:"mainfunction",onRender:function(a,b){Wlj.widgets.search.header.HeadBar.superclass.onRender.call(this,a,b),this.backgroundTpl=new Ext.XTemplate('<div class="main_menu" style="top:{top}px"></div>'),this.backgroundTpl.insertBefore(this.el,{top:this.y})}}),Ext.reg("headbar",Wlj.widgets.search.header.HeadBar),Wlj.widgets.search.header.MainFunction=Ext.extend(Ext.BoxComponent,{autoEl:{tag:"div",cls:"main_menu_div"},functionTpl:new Ext.XTemplate('<li class="main_menu_ul_li {cls}" style="{cssText}">','<a class="{acls}" href="javascript:void(0)">','<i class="{iconcls}"></i>','<i class="{wordcls}" title="{name}">{name}</i>',"</a>","</li>"),mainTpl:new Ext.XTemplate('<ul class="main_menu_ul"></ul>'),items:[],headerFun:new Ext.util.MixedCollection,onRender:function(ct,position){Wlj.widgets.search.header.MainFunction.superclass.onRender.call(this,ct,position),this.ulEl=this.mainTpl.append(this.el,{functions:[]});var _this=this;Ext.each(_this.items,function(it){var _fn=it.functionName?it.functionName:"Wlj.widgets.search.header.Function";_this.headerFun.add(eval("new "+_fn+"(it, _this)"))})},doRender:function(){var b,c,d,e,a=this.items;if(Ext.isArray(a)&&0!=a.length){for(b=this,c=a.length,d=[],e=0;c>e;e++)d.push(b.functionTpl.apply(a[e]));return d.join("")}},add:function(a){return this.functionTpl.append(this.ulEl,a.cfg)}}),Ext.reg("mainfunction",Wlj.widgets.search.header.MainFunction),Wlj.widgets.search.header.Function=function(a,b){Ext.apply(this,a),this.id=a.id?a.id:Ext.id("Head_fun_"),this.parent=b,this.cfg=a,this.el=b.add(this);var c=this;return Ext.fly(this.el).on("click",function(){Ext.isFunction(c.handler)&&c.handler(c.parent,c,c.el)}),Ext.isFunction(c.overHandler)&&Ext.fly(this.el).on("mouseenter",function(){c.overHandler(c.parent,c,c.el)}),Ext.isFunction(c.outHandler)&&Ext.fly(this.el).on("mouseleave",function(){c.outHandler(c.parent,c,c.el)}),this},Wlj.widgets.search.header.Function.prototype.show=function(){this.el.style.display="block"},Wlj.widgets.search.header.Function.prototype.hide=function(){this.el.style.display="none"},Wlj.widgets.search.header.MenuFunction=Ext.extend(Wlj.widgets.search.header.Function,{constructor:function(a,b){Wlj.widgets.search.header.MenuFunction.superclass.constructor.call(this,a,b),this.menuRoot||(this.menuRoot="0")},overHandler:function(a,b){var d,e;return b.menuItem&&b.hasSub?(b.menuItem.show(),void 0):(d=a.appObject.createSubMenuCfg(b.menuRoot))?(b.hasSub=!0,e=new Wlj.widgets.search.menu.MenuComponent({appObject:a.appObject,renderTo:b.el,items:[d]}),b.menuItem=e,a.appObject.menuItem=e,void 0):(b.hasSub=!1,!1)},outHandler:function(a,b){b.menuItem&&b.hasSub&&b.menuItem.hide()},handler:function(a,b){Wlj.ServiceMgr.findServiceByID(b.menuRoot)&&Wlj.ServiceMgr.findServiceByID(b.menuRoot).execute()}}),Wlj.widgets.search.header.UserInfo=Ext.extend(Ext.BoxComponent,{autoEl:{tag:"div",cls:"user_frame"},userImg:basepath+(""!==__userIcon?"/imgshow.json?t="+(new Date).getTime()+"&path="+__userIcon:"/contents/wljFrontFrame/styles/search/searchpics/user_head.jpg"),welcomeText:"",userName:"",userRole:"",userOrg:"",headTpl:new Ext.XTemplate('<div class="user_head">','<div class="user_head_pic"><img src="{userImg}" width="45" height="45" complete="complete"/></div>',"</div>"),logoutTpl:new Ext.XTemplate('<div class="user_oper">','<p><a class="loginout" href="'+basepath+'/j_spring_security_logout"></a></p>',"</div>"),infoTpl:new Ext.XTemplate('<div class="user_info">','<p class="user_info_p">你好，<i class="name">{userName}</i>，欢迎登录贷后管理系统！</p>','<p class="user_info_p blue"><span class="tit">岗位：</span><span>{userRole}</span></p>','<p class="user_info_p blue"><span class="tit">机构：</span><span>{userOrg}</span></p>',"</div>"),onRender:function(a,b){Wlj.widgets.search.header.UserInfo.superclass.onRender.call(this,a,b),this.headTpl.append(this.el,{userImg:this.userImg}),this.infoTpl.append(this.el,{userName:this.userName,userRole:this.userRole,userOrg:this.userOrg}),this.logoutTpl.append(this.el)}}),Ext.reg("userinfo",Wlj.widgets.search.header.UserInfo),Wlj.widgets.search.header.Customize=Ext.extend(Ext.Container,{autoEl:{tag:"div",cls:"yc-themeSettings"},themes:[],backgrounds:[],wordsizes:[],themeElArray:[],bgElArray:[],wordsizeElArray:[],containerTemplate:new Ext.XTemplate('<div class="yc-tsContent"></div>'),separateTemplate:new Ext.XTemplate('<div class="yc-ts-Title"><span class="yc-tstText">{text}</span></div>'),iconTemplate:new Ext.XTemplate('<a class="yc-tscLink" href="javascript:void(0);">','<img alt="" src="{icon}">','<div class="yc-tsclsIco"></div>',"</a>"),wordsizeTemplate:new Ext.XTemplate('<label><input type="radio" name="ra_fontsize" />{text}</label>'),saveTemplate:new Ext.XTemplate('<a class="yc-tsbt" href="javascript:void(0);" title="{text}">{text}</a>'),onRender:function(a,b){Wlj.widgets.search.header.Customize.superclass.onRender.call(this,a,b),this.renderThemeEl(),this.renderBackgroundEl(),this.renderWordsizeEl(),this.renderSaveEl(),this.el.applyStyles({zIndex:15e3})},onShow:function(){var a=this;Wlj.widgets.search.header.Customize.superclass.onShow.call(this),a.THEME_CSS=a.THEME_CSS?a.THEME_CSS:a.themes[0]?a.themes[0].themeName:"",a.BG_ICON=a.BG_ICON?a.BG_ICON:a.backgrounds[0]?a.backgrounds[0].reaBG:"",a.WORD_SIZE=a.WORD_SIZE?a.WORD_SIZE:a.wordsizes[0]?a.wordsizes[0].size:"",a.setCustomize()},renderThemeEl:function(){var a=this;a.separateTemplate.append(a.el,{text:"皮肤设置"}),a.themeEl=this.containerTemplate.append(a.el,{}),Ext.each(a.themes,function(b){var c=a.iconTemplate.append(a.themeEl,{icon:basepath+b.preBG});a.themeElArray.push(c),Ext.fly(c).on("click",function(){Ext.each(a.themeElArray,function(a){Ext.fly(a).removeClass("yc-tscLinkSelected")}),Ext.fly(c).addClass("yc-tscLinkSelected"),a.THEME_CSS=b.themeName})})},renderBackgroundEl:function(){var a=this;a.separateTemplate.append(a.el,{text:"背景设置"}),a.bgEl=this.containerTemplate.append(a.el,{}),Ext.each(a.backgrounds,function(b){var c=a.iconTemplate.append(a.bgEl,{icon:basepath+b.preBG});a.bgElArray.push(c),Ext.fly(c).on("click",function(){Ext.each(a.bgElArray,function(a){Ext.fly(a).removeClass("yc-tscLinkSelected")}),Ext.fly(c).addClass("yc-tscLinkSelected"),Ext.getBody().applyStyles({background:"url("+basepath+b.reaBG+") fixed center"}),a.BG_ICON=b.reaBG})})},renderWordsizeEl:function(){var a=this;a.separateTemplate.append(a.el,{text:"字号设置"}),a.wordSizeEl=a.containerTemplate.append(a.el,{}),Ext.each(a.wordsizes,function(b){var c=a.wordsizeTemplate.append(a.wordSizeEl,{text:b.text});a.wordsizeElArray.push(c),Ext.fly(c).on("click",function(){a.WORD_SIZE=b.size})})},renderSaveEl:function(){var a=this;new Ext.XTemplate('<div class="yc-ts-Title"></div>').append(a.el,{}),a.saveConainerEl=this.containerTemplate.append(a.el,{}),a.saveEl=a.saveTemplate.append(a.saveConainerEl,{text:"保存设置"}),a.resetEl=a.saveTemplate.append(a.saveConainerEl,{text:"恢复默认"}),Ext.fly(a.saveEl).on("click",function(){Ext.isFunction(a.saveHandler)&&a.saveHandler(a)}),Ext.fly(a.resetEl).on("click",function(){a.THEME_CSS=a.themes[0]?a.themes[0].themeName:"",a.BG_ICON=a.backgrounds[0]?a.backgrounds[0].reaBG:"",a.WORD_SIZE=a.wordsizes[0]?a.wordsizes[0].size:"",Ext.getBody().applyStyles({background:"url("+basepath+a.BG_ICON+") fixed center"}),a.setCustomize(),Ext.isFunction(a.saveHandler)&&a.saveHandler(a)}),new Ext.XTemplate('<span class="yc-tsRemark">提示：恢复默认将还原首页个性化与主题到初始状态。</span>').append(a.saveConainerEl,{})},setCustomize:function(){var b,a=this;for(b=0;b<a.themes.length;b++)Ext.fly(a.themeElArray[b]).removeClass("yc-tscLinkSelected"),a.THEME_CSS==a.themes[b].themeName&&Ext.fly(a.themeElArray[b]).addClass("yc-tscLinkSelected");for(b=0;b<a.backgrounds.length;b++)Ext.fly(a.bgElArray[b]).removeClass("yc-tscLinkSelected"),a.BG_ICON==a.backgrounds[b].reaBG&&Ext.fly(a.bgElArray[b]).addClass("yc-tscLinkSelected");for(b=0;b<a.wordsizes.length;b++)if(a.WORD_SIZE==a.wordsizes[b].size){Ext.fly(a.wordsizeElArray[b]).child("input").dom.checked=!0;break}},saveHandler:function(a){var b=this,c={themeCss:a.THEME_CSS?a.THEME_CSS:"",bgIcon:a.BG_ICON?a.BG_ICON:"",wordSize:a.WORD_SIZE?a.WORD_SIZE:"",spareOne:"",spareTwo:""};Ext.Ajax.request({url:basepath+"/userSysCfg.json",method:"POST",params:c,success:function(){Ext.apply(_APP.themeData,{THEME_CSS:a.THEME_CSS?a.THEME_CSS:"",BG_ICON:a.BG_ICON?a.BG_ICON:"",WORD_SIZE:a.WORD_SIZE?a.WORD_SIZE:"",SPARE_ONE:"",SPARE_TWO:""}),document.createStyleSheet(basepath+"/contents/wljFrontFrame/styles/search/searchthemes/"+a.THEME_CSS+"/frame.css",document.styleSheets.length),document.createStyleSheet(basepath+"/contents/wljFrontFrame/styles/search/searchthemes/"+a.THEME_CSS+"/main.css",document.styleSheets.length+1),"ra_normal"===a.WORD_SIZE?document.createStyleSheet(basepath+"/contents/wljFrontFrame/styles/search/searchcss/font_normal.css",document.styleSheets.length+2):document.createStyleSheet(basepath+"/contents/wljFrontFrame/styles/search/searchcss/font_big.css",document.styleSheets.length+2),Wlj.TaskMgr.tasks.each(function(b){b.frame.dom.contentWindow.document.createStyleSheet(basepath+"/contents/wljFrontFrame/styles/search/searchthemes/"+a.THEME_CSS+"/frame.css",b.frame.dom.contentWindow.document.styleSheets.length),b.frame.dom.contentWindow.document.createStyleSheet(basepath+"/contents/wljFrontFrame/styles/search/searchthemes/"+a.THEME_CSS+"/main.css",b.frame.dom.contentWindow.document.styleSheets.length+1),"ra_normal"===a.WORD_SIZE?b.frame.dom.contentWindow.document.createStyleSheet(basepath+"/contents/wljFrontFrame/styles/search/searchcss/font_normal.css",b.frame.dom.contentWindow.document.styleSheets.length+2):b.frame.dom.contentWindow.document.createStyleSheet(basepath+"/contents/wljFrontFrame/styles/search/searchcss/font_big.css",b.frame.dom.contentWindow.document.styleSheets.length+2)}),Ext.Msg.alert("提示","保存成功！"),b.hide()}})}}),Ext.reg("wljcustomize",Wlj.widgets.search.header.Customize),Ext.ns("Wlj.widgets.search.search"),Wlj.widgets.search.search.SearchField=Ext.extend(Ext.form.TextField,{triggerWidth:66,defautlWidth:491,comfex:!1,initComponent:function(){Wlj.widgets.search.search.SearchField.superclass.initComponent.call(this),this.width||(this.width=this.defautlWidth)},onRender:function(a,b){this.doc=Ext.isIE?Ext.getBody():Ext.getDoc(),Wlj.widgets.search.search.SearchField.superclass.onRender.call(this,a,b),this.wrap=this.el.wrap({cls:"search_input"}),this.Wwrap=this.wrap.wrap({tag:"div",cls:"search_inner"}),this.trigger=this.Wwrap.createChild(this.triggerConfig||{tag:"div",alt:"",cls:"search_bt"});var c=this;this.trigger.on("click",function(){c.triggerClick()}),this.width&&(this.wrap.applyStyles({width:this.width-this.triggerWidth+13+"px"}),this.el.applyStyles({width:this.width-this.triggerWidth+13+"px"})),this.resizeEl=this.positionEl=this.Wwrap},triggerClick:function(){this.ownerCt.doSearch()},listeners:{resize:function(a,b){this.wrap.applyStyles({width:b-this.triggerWidth-6-6-1-17+13+"px"}),this.el.applyStyles({width:b-this.triggerWidth-6-6-1-17+13+"px"}),this.Wwrap.applyStyles({width:b+"px"})}}}),Ext.reg("searchfield",Wlj.widgets.search.search.SearchField),Wlj.widgets.search.search.SearchType=Ext.extend(Ext.BoxComponent,{autoEl:{tag:"div",cls:"search_fun"},searchUlTemplate:new Ext.XTemplate("<ul class=search_ul></ul>"),items:Wlj.search.App.SEARCHTYPES,onRender:function(a,b){var c,d;Wlj.widgets.search.search.SearchType.superclass.onRender.call(this,a,b),this.searchUl=Ext.fly(this.searchUlTemplate.append(this.el)),this.types=new Array,c=this.types,d=this,Ext.each(Wlj.search.App.SEARCHTYPES,function(a){c.push(new Wlj.widgets.search.search.SearchI(a,d.searchUl,d))}),this.selectFirst()
},selectFirst:function(){this.types[0].click()},setCurrentType:function(a){this.currentType=a},getSearchType:function(){return this.currentType}}),Ext.reg("searchtype",Wlj.widgets.search.search.SearchType),Wlj.widgets.search.search.SearchI=function(a,b,c){this.owner=c,this.template=new Ext.XTemplate("<li>{name}</li>"),Ext.apply(this,a),this.el=this.template.append(b,{name:this.name});var d=this;this.el.onclick=function(){d.click()}},Wlj.widgets.search.search.SearchI.prototype.clearSelect=function(){Ext.fly(this.el).removeClass("selected"),this.owner.setCurrentType(!1)},Wlj.widgets.search.search.SearchI.prototype.click=function(){this.owner.currentType&&this.owner.currentType.clearSelect(),this.owner.setCurrentType(this),Ext.fly(this.el).addClass("selected"),Ext.isFunction(this.handler)&&this.handler.call(this,this,this.el)},Wlj.widgets.search.search.SearchI.prototype.getSearchType=function(){return this.searchType?this.searchType:!1},Wlj.widgets.search.search.SearchI.prototype.getData=function(){return""},Wlj.widgets.search.search.SearchComponent=Ext.extend(Ext.Container,{autoEl:{tag:"div",cls:"search"},searchTypeSelect:!0,fLeft:35,comfex:!1,comfexFn:!1,onRender:function(a,b){Wlj.widgets.search.search.SearchComponent.superclass.onRender.call(this,a,b),this.searchTypeSelect&&(this.searchType=new Wlj.widgets.search.search.SearchType({appObject:this.appObject}),this.add(this.searchType)),this.searchField=new Wlj.widgets.search.search.SearchField({comfex:this.comfex,appObject:this.appObject}),this.add(this.searchField),this.doLayout()},afterRender:function(){var a,b,c,d,e,f;Wlj.widgets.search.search.SearchComponent.superclass.afterRender.call(this),this.comfex&&(a=this.el.getViewSize(),b=this,c=48,d=a.width-48,e=parseInt(a.height/2),f='<div sylte="position:absolute;width:'+c+"px;margin-left:"+d+"px;margin-top:"+e+'px;"><a href="#" ><font color=blue>高级查询</font></a></div>',this.comfexEl=this.el.createChild(f),Ext.isFunction(this.comfexFn)&&this.comfexEl.on("click",function(){b.comfexFn()}))},listeners:{resize:function(a,b){a.searchField.setWidth(b-2*a.fLeft)}},doSearch:function(){var a,b,c,d;return this.searchTypeSelect!==!0?(Ext.Msg.alert("提示","请重写该对象的doSearch方法！"),!1):(a=this.searchType.getSearchType(),b=this.searchField.getValue(),a?b?(c="SEARCH_"+a.getSearchType(),d=a.searchUrl,d&&this.appObject.openWindow({name:a.name+"搜索:"+b,action:basepath+d+"?condition="+b,resId:c,id:"task_"+c}),void 0):(Ext.Msg.alert("提示","请添写查询条件"),!1):(Ext.Msg.alert("提示"," 请选择查询类型"),!1))},getValue:function(){return this.searchField.getValue()},setValue:function(a){a&&this.searchField.setValue(a)}}),Ext.reg("searchcomponent",Wlj.widgets.search.search.SearchComponent),Wlj.widgets.search.search.ModeShort=Ext.extend(Ext.BoxComponent,{autoEl:{tag:"div",cls:"tile w190h1 short_fun"},icon:"ico-t-1",tileColor:"tile_c1",name:"经营统计分析",ironTemplate:new Ext.XTemplate("<div class=tile_fun >",'<div class="tile_fun_pic {icon}">',"</div>","<div class=tile_fun_name >","<p title={name}>","<i>{name}</i>","</p>","</div>","</div>"),onRender:function(a,b){Wlj.widgets.search.search.ModeShort.superclass.onRender.call(this,a,b);var c=this;c.ironTemplate.append(c.el,{name:c.name,icon:c.icon}),c.el.on("click",function(){c.click()})},click:function(){Wlj.ServiceMgr.findServiceByID(this.menuData.ID).execute()}}),Ext.reg("modeshort",Wlj.widgets.search.search.ModeShort),Wlj.widgets.search.search.ShortTitle=Ext.extend(Wlj.widgets.search.search.ModeShort,{autoEl:{tag:"div",cls:"tile base tile_c1 short_fun"},icon:"ico-t-1",tileColor:"tile_c1",name:"历史记录",click:function(){return!1}}),Ext.reg("shorttitle",Wlj.widgets.search.search.ShortTitle),Wlj.widgets.search.search.ShortContainer=Ext.extend(Ext.Container,{autoEl:{tag:"div",cls:"layout_fun"},layoutElTemplate:new Ext.XTemplate("<div class=layout_fun_pos></div>"),onRender:function(a,b){Wlj.widgets.search.search.ShortContainer.superclass.onRender.call(this,a,b),this.layoutDom=this.layoutElTemplate.append(this.el)},getLayoutTarget:function(){return this.layoutDom}}),Ext.reg("shortcontainer",Wlj.widgets.search.search.ShortContainer),Wlj.widgets.search.search.SearchMainContainer=Ext.extend(Ext.Container,{autoEl:{tag:"div",cls:"layout layout_search"}}),Ext.reg("searchmaincontainer",Wlj.widgets.search.search.SearchMainContainer),Ext.ns("Wlj.widgets.search.tile"),Wlj.widgets.search.tile.TileContainer=Ext.extend(Ext.Container,{cls:"layout layout_tile",innerTpl:new Ext.XTemplate(' <div class="layout_contents" >',"</div>"),layoutEl:!1,scrolling:!1,scrollIndex:0,onRender:function(a,b){Wlj.widgets.search.tile.TileContainer.superclass.onRender.call(this,a,b),this.layoutEl=this.innerTpl.append(this.el);var c=this;this.el.on("mousewheel",function(a){var b=a.getWheelDelta();c.scroll(b)}),this.el.on("contextmenu",function(a){a.stopEvent(),c.onContextMenu(a,[])})},initComponent:function(){Wlj.widgets.search.tile.TileContainer.superclass.initComponent.call(this)},getLayoutTarget:function(){return this.layoutEl},listeners:{show:function(a){a.scrollIndex=0}},scroll:function(a){var b=this;if(this.scrolling)return!1;if(this.scrolling=!0,0>a&&this.scrollIndex<this.items.getCount()-1)this.scrollIndex++;else{if(!(a>0&&this.scrollIndex>0))return b.scrolling=!1,void 0;this.scrollIndex--}this.el.scrollTo("left",836*this.scrollIndex,!0),setTimeout(function(){b.scrolling=!1},350)},onContextMenu:function(a,b){var d,c=Wlj.search.App.CONTEXT_MENU.TILE_CONTAINER;b.length>0&&c.length>0&&b.push("-"),d=this,c.length>0&&Ext.each(c,function(a){a.handler=a.fn.createDelegate(d),b.push(a)}),this.appObject.onContextMenu(a,b)}}),Ext.reg("tilecontainer",Wlj.widgets.search.tile.TileContainer),Wlj.widgets.search.tile.TileGroup=Ext.extend(Ext.Panel,{baseCls:"layout_position",width:840,tileKeys:[],height:432,groupMargin:27,onRender:function(a,b){Wlj.widgets.search.tile.TileGroup.superclass.onRender.call(this,a,b),this.el.setLeft(this.width*this.index+this.groupMargin*(this.index+1)),this.initEvents();var c=this;this.el.on("contextmenu",function(a){a.stopEvent(),c.onContextMenu(a,[])}),this.el.applyStyles({border:"1px transparent  dashed"})},initEvents:function(){this.dd=new Wlj.widgets.search.tile.GroupDropZone(this,{ddGroup:"tileDrop"})},getTileWithPoint:function(a){var h,i,j,b=a.x,c=a.y,d=this,e=d.items.items,f=e.length,g=[];for(h=0;f>h;h++)i=e[h],j=i.pos_size,b>=j.TX&&b<j.TX+j.TW&&c>=j.TY&&c<j.TY+j.TH&&g.push(i);return g},regTile:function(a,b){if(this.tileKeys||(this.tileKeys={}),!Ext.isArray(a))return!1;var c=this;Ext.each(a,function(a){c.tileKeys[Ext.encode(a)]=b})},unRegTile:function(a){if(!Ext.isArray(a))return!1;var c=this;Ext.each(a,function(a){delete c.tileKeys[Ext.encode(a)]})},getRegedTiles:function(a){var b,c;return Ext.isArray(a)?(b=this,c=[],Ext.each(a,function(a){c.indexOf(b.tileKeys[Ext.encode(a)])<0&&c.push(b.tileKeys[Ext.encode(a)])}),c):!1},onContextMenu:function(a,b){var d,c=Wlj.search.App.CONTEXT_MENU.TILE_GROUP;b.length>0&&c.length>0&&b.push("-"),d=this,c.length>0&&Ext.each(c,function(a){a.handler=a.fn.createDelegate(d),b.push(a)}),this.ownerCt.onContextMenu(a,b)}}),Ext.reg("tilegroup",Wlj.widgets.search.tile.TileGroup),Wlj.widgets.search.tile.TileLayout=Ext.extend(Ext.layout.ContainerLayout,{type:"tilegroup",renderItem:function(a,b,c){Wlj.widgets.search.tile.TileLayout.superclass.renderItem.call(this,a,b,c)},fixPosition:function(a,b){var c=Ext.fly(b).getX(),d=Ext.fly(b).getY();a.el.setX(c+a.el.getX()),a.el.setY(d+a.el.getY())}}),Ext.Container.LAYOUTS["tilegroup"]=Wlj.widgets.search.tile.TileLayout,Wlj.widgets.search.tile.GroupDropZone=Ext.extend(Ext.dd.DropTarget,{constructor:function(a,b){this.group=a,Ext.dd.ScrollManager.register(a.body),Wlj.widgets.search.tile.GroupDropZone.superclass.constructor.call(this,a.body.dom,b),a.el.ddScrollConfig=this.ddScrollConfig},createEvent:function(a,b,c,d,e,f){return{group:this.group,panel:c.panel,columnIndex:d,column:e,position:f,data:c,source:a,rawEvent:b,status:this.dropAllowed}},notifyEnter:function(){this.group.el.applyStyles({border:"1px #d3dbea dashed"})},notifyOut:function(){this.group.el.applyStyles({border:"1px transparent dashed"})},notifyDrop:function(a){var i,j,k,l,m,d=a.tile,e=a.menu,f=a.plugin,g=a.proxy.ghost;d?(d.ownerCt!==this.group&&(d.ownerCt.remove(d,!1),d.el.setLeft(16),d.el.setTop(16),d.pos_size.TX=0,d.pos_size.TY=0,this.group.add(d),this.group.doLayout()),d.moveTo(g.getXY())):e?(i=this.group.ownerCt.items.indexOf(this.group),j=this.group.appObject,k=g.getXY()[0]-this.group.el.getX(),l=g.getXY()[1]-this.group.el.getY(),m={},m.POS_X=Math.floor(k/128),m.POS_Y=Math.floor(l/128),j.createTile(j.createTileCfg(e,m),i),j.tileContainer.doLayout()):f&&(i=this.group.ownerCt.items.indexOf(this.group),j=this.group.appObject,k=g.getXY()[0]-this.group.el.getX(),l=g.getXY()[1]-this.group.el.getY(),m={},m.POS_X=Math.floor(k/128),m.POS_Y=Math.floor(l/128),j.createTile(f.createTileCfg(m),i),j.tileContainer.doLayout())}}),Wlj.widgets.search.tile.Tile=Ext.extend(Ext.Container,{animate:!1,jsUrl:!1,dragable:!0,ddInitType:"render",removeable:!0,enforceHeight:!0,enforceWidth:!0,position:"absolute","float":!1,insertProxy:!1,ownerW:6,ownerH:3,ownerWI:0,ownerHI:0,baseSize:128,baseWidth:!1,baseHeight:!1,baseMargin:4,defaultDDGroup:"tileDrop",tileManaged:!0,tileSize:!1,tileName:!1,tileLogo:!1,autoEl:{tag:"div",cls:"",style:{position:"absolute"}},layoutTpl:new Ext.XTemplate('<div style="overflow-x:hidden;overflow-y:hidden; position: relative;"></div>'),toolTemplate:new Ext.Template('<div style="position:absolute;top:0;right:0; " class="x-tool x-tool-{id}">&#160;</div>'),logoTemplate:new Ext.XTemplate("<div class=tile_fun >","<a href=javascript:void(0); >",'<div class="tile_fun_pic {tileLogo}">',"</div>","<div class=tile_fun_name >","<p title={tileName} >","<i>","{tileName}","</i>","</p>","</div>","</a>","</div>"),pos_size:{TW:1,TH:1,TX:0,TY:0},initPostKey:function(){var a,b;for(this.posKey=[],a=0;a<this.pos_size.TW;a++)for(b=0;b<this.pos_size.TH;b++)this.posKey.push({x:this.pos_size.TX+a,y:this.pos_size.TY+b})},initComponent:function(){this.float&&(this.style||(this.style={}),this.style.float=this.float,this.style.position="relative",this.style.margin=this.baseMargin+"px"),Wlj.widgets.search.tile.Tile.superclass.initComponent.call(this),this.baseWidth=this.baseWidth?this.baseWidth:this.baseSize,this.baseHeight=this.baseHeight?this.baseHeight:this.baseSize,this.addEvents("beforeberemoved","beremoved")},onRender:function(a,b){Wlj.widgets.search.tile.Tile.superclass.onRender.call(this,a,b),this.float||this.buildTilePosition(),this.buildTileSize(),this.animate=new Wlj.widgets.search.tile.Tile.Animate(this),this.JsLoader=Ext.ScriptLoader,this.initPostKey(),this.layoutEl=this.layoutTpl.append(this.el),this.dragable&&"render"===this.ddInitType&&(this.dd=new Wlj.widgets.search.tile.Tile.DD(this,{ddGroup:this.defaultDDGroup,insertProxy:this.insertProxy}))},afterRender:function(){var a,b,c;Wlj.widgets.search.tile.Tile.superclass.afterRender.call(this),a=this,this.el.on("mousedown",function(b){a.dragable&&!a.dd&&(a.dd=new Wlj.widgets.search.tile.Tile.DD(a,{ddGroup:a.defaultDDGroup,insertProxy:a.insertProxy}),a.dd.handleMouseDown(b,a.dd))}),this.tileSize||this.tileLogo&&(this.logo=this.logoTemplate.append(this.getLayoutTarget(),{tileLogo:this.tileLogo,tileName:this.tileName}),Ext.fly(this.logo).on("click",function(){a.clickFire()})),this.tileManaged&&Wlj.TileMgr.addTile(this),a=this,this.removeable&&(b="x-tool-unpin",c=this.toolTemplate.insertFirst(this.el,{id:"pin"}),c.style.zIndex=15e3,Ext.fly(c).addClassOnOver(b),Ext.fly(c).animate({opacity:{to:0,from:1}},1),Ext.fly(c).on("mouseover",function(a,b){a.stopEvent(),Ext.fly(b).animate({opacity:{to:1,from:0}},1)}),Ext.fly(c).on("mouseout",function(a,b){a.stopEvent(),Ext.fly(b).animate({opacity:{to:0,from:1}},1)}),Ext.fly(c).on("click",function(b){b.stopEvent(),a.removeThis()}),a.removeTool=c)},moveTo:function(a){var c=this,d=c.getXYOrder(a);this.ownerCt.getRegedTiles(this.posKey),c.moveToPoint(d),this.initPostKey()},moveToPoint:function(a,b){var e,f,g,c=this,d=c.initPosition();c.pos_size.TX=a.x,c.pos_size.TY=a.y,c.fixPos(),e=c.initPosition(),f=e.x-d.x,g=e.y-d.y,this.animate.moveWithRaletive(f,g,b)},forcedMove:function(){},getXYOrder:function(a){var b=a[0]-this.ownerCt.el.getX(),c=a[1]-this.ownerCt.el.getY(),d={};return d.x=Math.floor(b/this.baseWidth),d.y=Math.floor(c/this.baseHeight),d},buildTilePosition:function(){this.el.setPositioning({position:this.position}),this.fixPos(),this.el.setLeft(this.initPosition().x),this.el.setTop(this.initPosition().y)},buildTileSize:function(){this.enforceHeight&&(this.el.dom.style.height=this.getSize().height+"px"),this.enforceWidth&&(this.el.dom.style.width=this.getSize().width+"px")},getSize:function(){var a=this.pos_size.TW,b=this.pos_size.TH;return{width:a*this.baseWidth+2*this.baseMargin*(a-1),height:b*this.baseHeight+2*this.baseMargin*(b-1)}},setSize:function(a){a&&(a.width||a.height)&&(Ext.isNumber(a.width)||Ext.isNumber(a.height))&&(Ext.isNumber(a.width)&&(this.pos_size.TW=a.width),Ext.isNumber(a.height)&&(this.pos_size.TH=a.height),this.buildTileSize())},initPosition:function(){var a=this.pos_size.TX,b=this.pos_size.TY;return{x:a*this.baseWidth+(a+2)*2*this.baseMargin,y:b*this.baseHeight+(b+2)*2*this.baseMargin}},setPosition:function(a){var c,b=this.initPosition();a&&(a.x||a.y)&&(Ext.isNumber(a.x)||Ext.isNumber(a.y))&&(Ext.isNumber(a.x)&&(this.pos_size.TX=a.x),Ext.isNumber(a.y)&&(this.pos_size.TY=a.y),c=this.initPosition(),this.el.moveTo(c.x-b.x,c.y-b.y,!0))},fixPos:function(){var a=this,b=this.ownerWI,c=this.ownerHI;a.pos_size.TX<b&&(a.pos_size.TX=b),a.pos_size.TY<c&&(a.pos_size.TY=c),a.pos_size.TY+a.pos_size.TH>a.ownerH&&(a.pos_size.TY=a.ownerH-a.pos_size.TH),a.pos_size.TX+a.pos_size.TW>a.ownerW&&(a.pos_size.TX=a.ownerW-a.pos_size.TW)},createGhost:function(a,b,c){var e,d=document.createElement("div");return d.className="x-panel-ghost "+(a?a:""),this.header&&d.appendChild(this.el.dom.firstChild.cloneNode(!0)),Ext.fly(d.appendChild(document.createElement("ul"))).setHeight(this.getSize().height),d.style.width=this.el.dom.offsetWidth+"px",c?Ext.getDom(c).appendChild(d):this.container.dom.appendChild(d),b!==!1&&this.el.shim!==!1?(e=new Ext.Layer({shadow:!1,useDisplay:!0,constrain:!1},d),e.show(),e):new Ext.Element(d)},removeThis:function(){var a=this;try{a.animate.fadeOut(),setTimeout(function(){a.ownerCt?a.ownerCt.remove(a,!0):a.destroy()},1e3)}catch(b){}},clickFire:function(){var a=this;a.menuData&&a.menuData.ACTION&&"0"!=a.menuData.ACTION&&Wlj.ServiceMgr.findServiceByID(this.menuData.ID).execute()},getLayoutTarget:function(){return this.layoutEl},destroy:function(){this.dd&&this.dd.destroy(),this.animate&&Ext.destroy(this.animate),this.removeAll(),this.purgeListeners(),this.el.removeAllListeners(),Ext.fly(this.layoutEl).remove(),this.logo&&(Ext.fly(this.logo).removeAllListeners(),Ext.fly(this.logo).remove()),this.removeTool&&(Ext.fly(this.removeTool).removeAllListeners(),Ext.fly(this.removeTool).remove()),this.tileManaged,Wlj.widgets.search.tile.Tile.superclass.destroy.call(this)}}),Ext.reg("tile",Wlj.widgets.search.tile.Tile),Wlj.widgets.search.tile.NegaLayout=Ext.extend(Ext.layout.CardLayout,{renderHidden:!1,setActiveItem:function(a){var b=this.activeItem,c=this.container;a=c.getComponent(a),a&&b!=a&&(this.activeItem=a,delete a.deferLayout,Ext.fly(c.layoutEl).scrollTo("top",c.items.indexOf(a)*c.el.getHeight(),!0),a.fireEvent("activate",a))},configureItem:function(a){a&&this.container.el.getHeight()>0&&a.setSize(this.container.el.getViewSize())},getLayoutTargetSize:function(){return this.container.el.getViewSize()}}),Ext.Container.LAYOUTS["nega"]=Wlj.widgets.search.tile.NegaLayout,Wlj.widgets.search.tile.NegativeTile=Ext.extend(Wlj.widgets.search.tile.Tile,{negativeConfig:!1,layout:"nega",interval:1e3,intervalId:!1,initComponent:function(){Wlj.widgets.search.tile.NegativeTile.superclass.initComponent.call(this),this.on("afterlayout",this.reRunInterval)},onRender:function(a,b){Wlj.widgets.search.tile.NegativeTile.superclass.onRender.call(this,a,b)},afterRender:function(){Wlj.widgets.search.tile.NegativeTile.superclass.afterRender.call(this),this.layout.setActiveItem(0),this.el.on("mouseover",this.clearInterval.createDelegate(this)),this.el.on("mouseout",this.reRunInterval.createDelegate(this))},scrollToNext:function(){var a=this.items.getCount(),b=this.items.indexOf(this.layout.activeItem);a-1>b?b++:b=0,this.layout.setActiveItem(b)},clearInterval:function(){clearInterval(this.intervalId),this.intervalId=!1},setInterval:function(){var a=this.interval,b=this;this.items.getCount()>1&&(b.intervalId=setInterval(function(){b.scrollToNext()},a))},reRunInterval:function(){var a=this;a.intervalId!==!1&&a.clearInterval(),a.setInterval()}}),Ext.reg("negatile",Wlj.widgets.search.tile.NegativeTile),Wlj.widgets.search.tile.ResizeTile=Ext.extend(Wlj.widgets.search.tile.NegativeTile,{enableResize:!0,afterRender:function(){Wlj.widgets.search.tile.ResizeTile.superclass.afterRender.call(this),this.enableResize&&this.createResizable()},createResizable:function(){this.RESIZEABLE=new Wlj.widgets.search.tile.ResizeTile.Resizeable(this.el,{}),this.RESIZEABLE.on("resize",this.onresize.createDelegate(this))},onresize:function(){}}),Ext.reg("resizetile",Wlj.widgets.search.tile.ResizeTile),Wlj.widgets.search.tile.ResizeTile.Resizeable=Ext.extend(Ext.Resizable,{constructor:function(a,b){Wlj.widgets.search.tile.ResizeTile.Resizeable.superclass.constructor.call(this,a,b)},handles:"se",preserveRatio:!0,minWidth:50,minHeight:50,dynamic:!0}),Wlj.widgets.search.tile.IndexTile=Ext.extend(Wlj.widgets.search.tile.ResizeTile,{enableResize:!1,enableTransSize:!0,resizeTemplate:new Ext.Template('<div style="position:absolute;bottom:0;right:0; " class="x-tool x-tool-{id}">&#160;</div>'),initComponent:function(){Wlj.widgets.search.tile.IndexTile.superclass.initComponent.call(this);var a=this.appObject.translateSize(this.tileSize);(void 0==a.TH||void 0==a.TW||1==a.TW&&1==a.TH)&&(this.jsUrl=!1,this.tileSize=!1)},afterRender:function(){var a,b;Ext.fly(this.layoutEl).setSize(this.el.getViewSize()),Wlj.widgets.search.tile.IndexTile.superclass.afterRender.call(this),Ext.isEmpty(this.menuData.SUPPORT_SIZE_URL)&&(this.enableTransSize=!1),a=this,this.enableTransSize&&(this.supported=Ext.unzipString(this.menuData.SUPPORT_SIZE_URL,",","|"),b=this.resizeTemplate.insertFirst(this.el,{id:"refresh"}),b.style.zIndex=15e3,Ext.fly(b).animate({opacity:{to:0,from:1}},1),Ext.fly(b).on("mouseover",function(a,b){a.stopEvent(),Ext.fly(b).animate({opacity:{to:1,from:0}},1)}),Ext.fly(b).on("mouseout",function(a,b){a.stopEvent(),Ext.fly(b).animate({opacity:{to:0,from:1}},1)}),Ext.fly(b).on("click",function(b){b.stopEvent(),a.resize()})),this.el.on("contextmenu",function(b){b.stopEvent(),a.onContextMenu(b,[])})},resize:function(){var b,c,d,e,a=-1;for(b=0;b<this.supported.length;b++)this.supported[b][0]===this.tileSize&&(a=b);c=!1,d=!1,a<this.supported.length-1&&(c=this.supported[a+1][0],d=this.supported[a+1][1]),this.tileSize=c,e=this.appObject.translateSize(c),this.pos_size.TW=e.TW,this.pos_size.TH=e.TH,this.jsUrl=d,this.reBuiltTile()},reBuiltTile:function(){if(delete this.contentObject,this.clearTileContent(),this.buildTileSize(),Ext.fly(this.getLayoutTarget()).applyStyles({height:this.el.getHeight(),width:this.el.getWidth()}),!this.tileSize&&this.tileLogo){var a=this.logoTemplate.append(this.getLayoutTarget(),{tileLogo:this.tileLogo,tileName:this.tileName});Ext.fly(a).on("click",function(){_this.clickFire()})}Wlj.TileMgr.tiles.remove(this),Wlj.TileMgr.addTile(this)},clearTileContent:function(){this.removeAll(),this.doLayout(),this.getLayoutTarget().innerHTML=""},onContextMenu:function(a,b){var d,c=Wlj.search.App.CONTEXT_MENU.INDEX_TILE;b.length>0&&c.length>0&&b.push("-"),d=this,c.length>0&&Ext.each(c,function(a){a.handler=a.fn.createDelegate(d),b.push(a)}),this.ownerCt.onContextMenu(a,b)}}),Ext.reg("indextile",Wlj.widgets.search.tile.IndexTile),Wlj.widgets.search.tile.EditTile=Ext.extend(Wlj.widgets.search.tile.Tile,{tileManaged:!1,tileLogo:!1,baseSize:300,hideLabel:!0,innerTextTpl:new Ext.XTemplate("<div>{valueText}</div>"),initComponent:function(){Wlj.widgets.search.tile.EditTile.superclass.initComponent.call(this),delete this.html;var a=this;this.contentArea=new Ext.form.TextArea({preventScrollbars:!1,width:this.baseSize*this.pos_size.TW,height:this.baseSize*this.pos_size.TH,listeners:{blur:function(b){b.hide(),a.onAreaBlur(b)}}})},onRender:function(a,b){Wlj.widgets.search.tile.EditTile.superclass.onRender.call(this,a,b),this.contentArea.render(this.el),this.contentArea.hide();var c=this;this.el.on("dblclick",function(){c.contentArea.show(),c.contentArea.focus(),c.contentArea.setValue(this.valueText)}),this.on("resize",this.onresize)},onresize:function(a,b,c){this.contentArea.setHeight(c),this.contentArea.setWidth(b)},onAreaBlur:function(a){this.valueText=a.getValue(),this.innerHtml&&Ext.fly(this.innerHtml).remove(),delete this.innerHtml,this.innerHtml=this.innerTextTpl.append(this.el,{valueText:this.valueText})}}),Wlj.widgets.search.tile.TileProxy=Ext.extend(Object,{constructor:function(a,b){this.tile=a,this.id=this.tile.id+"-ddproxy",Ext.apply(this,b)},insertProxy:!1,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){this.ghost&&(this.proxy&&(this.proxy.remove(),delete this.proxy),this.tile.el.dom.style.display="",this.ghost.remove(),delete this.ghost)},show:function(){this.ghost||(this.ghost=this.tile.createGhost(this.tile.initialConfig.cls,void 0,Ext.getBody()),this.ghost.setXY(this.tile.el.getXY()),this.insertProxy&&(this.proxy=this.tile.el.insertSibling({cls:"tile"}),this.proxy.setSize(this.tile.getSize())),this.tile.el.dom.style.display="none")},repair:function(a,b,c){this.hide(),"function"==typeof b&&b.call(c||this)},moveProxy:function(a,b){this.proxy&&a.insertBefore(this.proxy.dom,b)}}),Wlj.widgets.search.tile.Tile.DD=Ext.extend(Ext.dd.DragSource,{constructor:function(a,b){this.tile=a,this.dragData={tile:a},this.proxy=new Wlj.widgets.search.tile.TileProxy(a,b),Wlj.widgets.search.tile.Tile.DD.superclass.constructor.call(this,a.el,b);var c=a.header,d=a.el;c&&(this.setHandleElId(c.id),d=a.header),this.scroll=!1},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(){this.proxy.show()},b4MouseDown:function(a){var b=a.getPageX(),c=a.getPageY();this.autoOffset(b,c)},onInitDrag:function(a,b){return this.onStartDrag(a,b),!0},createFrame:Ext.emptyFn,getDragEl:function(){return this.proxy.ghost.dom},endDrag:function(){this.proxy.hide(),this.tile.saveState()},autoOffset:function(a,b){a-=this.startPageX,b-=this.startPageY,this.setDelta(a,b)},onDrag:function(){}}),Wlj.widgets.search.tile.Tile.Animate=function(a){this.tile=a,this.el=a.el,Wlj.widgets.search.tile.Tile.Animate.superclass.constructor.call(this)},Ext.extend(Wlj.widgets.search.tile.Tile.Animate,Ext.util.Observable,{defaultAnim:{duration:300},fadeIn:function(){this.el.fadeIn(300)},fadeOut:function(){this.el.fadeOut(300)},moveWithRaletive:function(a,b,c){function i(){var n,o,i=new Date,k=i-d,l=k/e;if(l>=1){if(f.el.dom&&f.el.applyStyles({top:g.y+"px",left:g.x+"px"}),Ext.TaskMgr.stop(j),Ext.isFunction(c))try{c(f.tile)}catch(m){}}else if(n=l*b,o=l*a,f.el.dom)f.el.applyStyles({top:n+h.y+"px",left:o+h.x+"px"});else if(Ext.TaskMgr.stop(j),Ext.isFunction(c))try{c(f.tile)}catch(m){}}var d,e,f,g,h,j;this.el.dom&&(d=new Date,e=this.defaultAnim.duration,f=this,g=f.tile.initPosition(),h={x:parseInt(f.el.dom.style.left),y:parseInt(f.el.dom.style.top)},j={run:i,interval:20,scope:this},Ext.TaskMgr.start(j))},moveWithAbsolute:function(a,b){var c=this.el.getLeft(),d=this.el.getTop();this.moveWithRaletive(a-c,b-d)},moveWithMargin:function(){}}),Ext.ns("Wlj.widgets.search.menu"),Wlj.widgets.search.menu.MenuItem=Ext.extend(Ext.Container,{autoEl:"li",id:"",name:"",isLeaf:!0,enableTile:!0,defaultType:"wljmenuitem",displayTemplate:new Ext.XTemplate('<a class="lv2" href="javascript:void(0);">','<i class="word">','<i class="ico">','<imp height=16 width=16 src="'+basepath+'/contents/wljFrontFrame/styles/search/searchthemes/theme1/pics/menu_icon_fun.png" complete=complete />',"</i>","{name}","</i>","</a>"),tileTemplate:new Ext.XTemplate('<div style="position:absolute;"></div>'),subTemplate:new Ext.XTemplate('<div class=lv_div style="display:none;buttom:0;" ><ul class=lv_ul></ul></div>'),subTrigger:new Ext.XTemplate('<i class="arr" />'),onRender:function(a,b){this.ownerCt&&(this.enableTile=this.ownerCt.enableTile),Wlj.widgets.search.menu.MenuItem.superclass.onRender.call(this,a,b),this.displayEl=this.displayTemplate.append(this.el,{name:this.name});var c=this;c.el.applyStyles({zIndex:15e3}),this.isLeaf||(Ext.fly(this.displayEl).addClass("arr"),this.subTrigger.append(this.displayEl)),this.el.on("mouseenter",function(a){a.stopEvent(),c.showSubs()}),this.el.on("click",function(a){a.stopEvent(),c.handler()}),this.isLeaf&&this.enableTile&&this.createDD()},showSubs:function(){var a,b,c;return this.inited||this.initSubMenus(),this.ownerCt.displayedSub&&this.ownerCt.displayedSub.hideSubs(),this.ownerCt.displayedSub=this,this.hasSub?(this.subEl.style.display="block",a=this,b=Ext.fly(this.subEl.firstChild).getViewSize().height,c=Ext.fly(this.subEl.firstChild).getXY()[1],b+c>a.appObject.size.height&&Ext.fly(this.subEl).applyStyles({marginTop:a.appObject.size.height-(b+c)+"px"}),void 0):!1},hideSubs:function(){return this.subEl&&(this.subEl.style.display="none"),this.hasSub?(this.ownerCt.displayedSub===this&&(this.ownerCt.displayedSub=!1),this.items.each(function(a){a.hideSubs()}),void 0):!1},hideAll:function(){this.items.length>0?this.items.each(function(a){a.hideAll()}):this.el.hide(),this.hideSubs()},initSubMenus:function(){this.inited=!0;var a=this.getSubDatas();a.length>0?(this.hasSub=!0,this.add(a),this.doLayout()):this.hasSub=!1},getSubDatas:function(){return this.appObject.createSubMenuCfg(this.ID)},getLayoutTarget:function(){return this.subEl||(this.subEl=this.subTemplate.append(this.el)),this.subEl.firstChild},handler:function(){this.action&&Wlj.ServiceMgr.findServiceByID(this.ID).execute()},createGhost:function(a,b,c){var j,d=this.appObject.translateSize(this.DEFAULT_SIZE),e=d.TW,f=d.TH,g=this.appObject.defaultIndexTileWidthUnit,h=this.appObject.defaultIndexTileHeightUnit,i=document.createElement("div");return i.style.width=e*g+8*(e-1),i.style.height=f*h+8*(f-1),i.className="x-panel-ghost "+(a?a:""),this.header&&i.appendChild(this.tileTemplate.apply()),Ext.fly(i.appendChild(document.createElement("ul"))).setHeight(f*h+8*(f-1)),i.style.width=e*g+8*(e-1)+"px",c?Ext.getDom(c).appendChild(i):this.container.dom.appendChild(i),b!==!1&&this.el.shim!==!1?(j=new Ext.Layer({shadow:!1,useDisplay:!0,constrain:!1},i),j.show(),j):new Ext.Element(i)},createDD:function(){this.dd=new Wlj.widgets.search.menu.MenuItem.DD(this,{ddGroup:"tileDrop"})}}),Ext.reg("wljmenuitem",Wlj.widgets.search.menu.MenuItem),Wlj.widgets.search.menu.MenuComponent=Ext.extend(Ext.Container,{autoEl:{tag:"div",cls:"lv2_div"},enableTile:!0,defaultType:"wljmenuitem",componentTemplate:new Ext.XTemplate("<ul class=lv2_ul />"),onRender:function(a,b){Wlj.widgets.search.menu.MenuComponent.superclass.onRender.call(this,a,b),this.el.applyStyles({zIndex:15e3}),this.itemEl=this.componentTemplate.append(this.el)},getLayoutTarget:function(){return this.itemEl},hideAll:function(){this.items.each(function(a){a.hideSubs()}),this.el.hide()}}),Ext.reg("menucomponent",Wlj.widgets.search.menu.MenuComponent),Wlj.widgets.search.menu.MenuProxy=Ext.extend(Object,{constructor:function(a,b){this.menu=a,this.id=this.menu.id+"-ddproxy",Ext.apply(this,b)},insertProxy:!1,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){this.ghost&&(this.proxy&&(this.proxy.remove(),delete this.proxy),this.ghost.remove(),delete this.ghost)},show:function(){this.ghost||(this.ghost=this.menu.createGhost(this.menu.initialConfig.cls,void 0,Ext.getBody()),this.ghost.setXY(this.menu.el.getXY()))},repair:function(a,b,c){this.hide(),"function"==typeof b&&b.call(c||this)},moveProxy:function(){}}),Wlj.widgets.search.menu.MenuItem.DD=Ext.extend(Ext.dd.DragSource,{constructor:function(a,b){this.menu=a,this.dragData={menu:a},this.proxy=new Wlj.widgets.search.menu.MenuProxy(a,b),Wlj.widgets.search.menu.MenuItem.DD.superclass.constructor.call(this,a.el,b);var c=a.header,d=a.el;c&&(this.setHandleElId(c.id),d=a.header),this.scroll=!1},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(){this.proxy.show(),this.menu.appObject.menuItem.hide()},b4MouseDown:function(a){var b=a.getPageX(),c=a.getPageY();this.autoOffset(b,c)},onInitDrag:function(a,b){return this.onStartDrag(a,b),!0},createFrame:Ext.emptyFn,getDragEl:function(){return this.proxy.ghost.dom},endDrag:function(){this.proxy.hide(),this.menu.el.dom.style.visibility=""},autoOffset:function(a,b){a-=this.startPageX,b-=this.startPageY,this.setDelta(a,b)},onDrag:function(){}}),Ext.ns("Wlj.widgets.search.window"),Wlj.widgets.search.window.TaskBar=Ext.extend(Ext.Container,{autoEl:{tag:"div",cls:"main_task"},windowManager:new Ext.WindowGroup,containerTemplate:new Ext.XTemplate("<div class=main_task_div >","<div class=task_box >","</div>","</div>"),onRender:function(a,b){Wlj.widgets.search.window.TaskBar.superclass.onRender.call(this,a,b),this.containerEl=this.containerTemplate.append(this.el);var c=this;this.el.on("contextmenu",function(a){a.stopEvent(),c.onContextMenu(a,[])})},getLayoutTarget:function(){return this.containerEl},openWindow:function(a){var b=a.id,c=this.getTaskByTaskId(b);c?c.select():(this.add(new Wlj.widgets.search.window.TaskItem(Ext.apply(a,{appObject:this.appObject,height:this.height-2}))),this.doLayout())},getTaskByTaskId:function(a){var b=this.items.get(a);return b?b:!1},closeAll:function(){this.items.each(function(a){a.close()})},closeWithOutCurrent:function(){var a=this;this.items.each(function(b){b!==a.currentItem&&b.close()})},closeWithOut:function(a){this.items.each(function(b){b!==a&&b.close()})},onContextMenu:function(a,b){var d,c=Wlj.search.App.CONTEXT_MENU.TASK_BAR;b.length>0&&c.length>0&&b.push("-"),d=this,c.length>0&&Ext.each(c,function(a){a.handler||(a.handler=a.fn.createDelegate(d)),b.push(a)}),this.appObject.onContextMenu(a,b)}}),Ext.reg("taskbar",Wlj.widgets.search.window.TaskBar),Wlj.widgets.search.window.TaskItem=Ext.extend(Ext.BoxComponent,{name:"任务1",action:"aaaa",minisized:!1,serviceObject:!1,autoEl:{tag:"div",cls:"task_normal"},taskTemplate:new Ext.XTemplate("<div class=bg>","<p>",'<a title={taskName} class=tab href="javascript:void(0);" >',"{taskName}","</a>","</p>","</div>"),closeTemplate:new Ext.XTemplate("<div class=close />"),initComponent:function(){Wlj.widgets.search.window.TaskItem.superclass.initComponent.call(this),Wlj.TaskMgr.addTask(this),this.serviceObject&&this.serviceObject.paddingFlag(!0)},onRender:function(a,b){Wlj.widgets.search.window.TaskItem.superclass.onRender.call(this,a,b);var c=this;this.taskTemplate.append(this.el,{taskName:this.name}),this.createWindow(),this.select(function(){c.creativeCb()}),this.el.on("click",function(){c.itemClick()}),this.el.on("mouseenter",function(){_APP.showTaskThumber(c)}),this.el.on("mouseleave",function(){_APP.hideTaskThumber()}),this.el.on("contextmenu",function(a){a.stopEvent(),c.onContextMenu(a,[])})},createWindow:function(){this.windowObject=new Wlj.widgets.search.window.Window({id:"window"+this.resId,maximizable:!0,manager:this.ownerCt.windowManager,resizable:!0,minimizable:!0,top:200,left:200,height:400,width:700,taskObject:this,appObject:this.appObject})},creativeCb:function(){this.windowObject.maximize();var a=this.builtfunctionurl();this.frame=this.windowObject.body.createChild({tag:"iframe",style:{width:"100%",height:"100%",border:"none"},src:a}),Wlj.TaskMgr.toFront()
},builtfunctionurl:function(){var b,a=!1;if(this.action.indexOf(".jnlp")>0)a=this.action.split(".jnlp")[0]+".jnlp";else{if(this.action.indexOf("http://")>=0)return this.action;a=this.action.indexOf(".jsp")<0?basepath+"/contents/frameControllers/wlj-function.jsp":this.action.split(".jsp")[0]+".jsp"}return b=this.action.indexOf("?")>=0?this.action+"&resId="+this.resId:this.action+"?resId="+this.resId,a+="?"+b.split("?")[1]},select:function(a){this.minisized=!1,this.ownerCt.currentItem&&this.ownerCt.currentItem.el.removeClass("task_active"),this.ownerCt.currentItem=this,this.el.addClass("task_active"),this.windowObject.show(this.el,a),this.ownerCt.windowManager.bringToFront(this.windowObject)},blur:function(){this.el.removeClass("task_active"),this.windowObject.setActive(!1)},close:function(){this.windowObject.close()},closeOthers:function(){this.ownerCt.closeWithOut(this)},removeFromManager:function(){this.serviceObject&&this.serviceObject.paddingFlag(!1),Wlj.TaskMgr.removeTask(this),this.ownerCt.remove(this)},itemClick:function(){this.minisized||this.windowObject!==this.windowObject.manager.getActive()?this.select():this.minisize()},windowClick:function(){this.select()},minisize:function(){this.minisized=!0,this.windowObject.hide(this.el),this.el.removeClass("task_active")},maxisize:function(){this.select(),this.windowObject.maximize()},reload:function(){var a=this.builtfunctionurl();this.frame.dom.src=a},destroy:function(){this.frame.dom.src="",this.el.removeAllListeners(),this.el.remove(),delete this.frame,Wlj.widgets.search.window.TaskItem.superclass.destroy.call(this)},onContextMenu:function(a,b){var c=this,d=Wlj.search.App.CONTEXT_MENU.TASK_ITEM;b.length>0&&d.length>0&&b.push("-"),d.length>0&&Ext.each(d,function(a){a.handler=a.fn.createDelegate(c),b.push(a)}),this.ownerCt.onContextMenu(a,b)},getGridThumber:function(){return this.frame.dom.contentWindow._app&&this.frame.dom.contentWindow._app.plugins&&this.frame.dom.contentWindow._app.plugins.Thumbnails?this.frame.dom.contentWindow._app.plugins.Thumbnails.getBuilt():!1}}),Ext.reg("taskitem",Wlj.widgets.search.window.TaskItem),Wlj.widgets.search.window.Window=Ext.extend(Ext.Window,{guardCfg:{},guardStyle:{backgroundColor:"#000",width:"100px",height:"20px"},fitContainer:function(){var a=this.container.getViewSize(!1);this.setSize(a.width,a.height-this.appObject.taskBar.height)},onRender:function(a,b){Wlj.widgets.search.window.Window.superclass.onRender.call(this,a,b),this.windowBar=new Wlj.widgets.search.window.WindowBar({appObject:this.appObject,windowObject:this}),this.windowBar.render(this.header.dom)},listeners:{activate:function(a){a.taskObject.windowClick()},close:function(a){return a.taskObject.removeFromManager(),!1},minimize:function(a){a.taskObject.minisize()}},destroy:function(){this.windowBar.destroy(),delete this.windowBar,Wlj.widgets.search.window.Window.superclass.destroy.call(this)}}),Ext.reg("wljwindow",Wlj.widgets.search.window.Window),Wlj.widgets.search.window.WindowBar=Ext.extend(Ext.Toolbar,{toolbarCls:"x-toolbar x-windowbar",hideBorders:!0,initComponent:function(){Wlj.widgets.search.window.WindowBar.superclass.initComponent.call(this),this.createInnerMenuItem()},onRender:function(a,b){Wlj.widgets.search.window.WindowBar.superclass.onRender.call(this,a,b)},buildInnerMenu:function(){var b,a=this;window.windowRoot||(b=this.appObject.createRootMenuCfg(),Ext.each(b,function(b){delete b.id,b.text=b.NAME,b.menu=[],b._windowObject=a.windowObject,b.xtype="wljinnermenuitem"}),window.windowRoot=b),this.add({text:"系统菜单",cls:"simple-btn1",overCls:"simple-btn1-hover",plain:!0,appObject:a.appObject,menu:{items:window.windowRoot}},{xtype:"tbseparator"})},buildComsits:function(){var c,d,a=this,b="";b=a.windowObject.taskObject.serviceObject?a.windowObject.taskObject.serviceObject.menuData.COMSITS:!1,c=b?!1:!0,d=[],c||(Ext.each(b.split(","),function(b){var e,c=Wlj.ServiceMgr.findServiceByID(b);c&&c.menuData&&(e={},Ext.apply(e,c.menuData),e.name=e.NAME,e.isLeaf=!0,e.action=e.ACTION,e.appObject=a.appObject,e.text=e.NAME,e._windowObject=a.windowObject,e.xtype="wljinnermenuitem",d.push(e))}),this.add({text:"相关功能",cls:"simple-btn1",overCls:"simple-btn1-hover",hidden:c,menu:{items:d}},{xtype:"tbseparator"})),delete d},createInnerMenuItem:function(){APPUTIL.menuInWindow&&this.buildInnerMenu(),APPUTIL.buildComsits&&this.buildComsits(),this.add(Wlj.search.App.TASKEXTENSION)}}),Ext.reg("wljwindowbar",Wlj.widgets.search.window.Window),Wlj.widgets.search.window.InnerMenu=Ext.extend(Ext.menu.Item,{windowObject:!1,initComponent:function(){var a=this.appObject.createSubMenuCfg(this.ID),b=this;Ext.each(a,function(a){a.id=a.id+"_innermenu_"+b.id,a.text=a.NAME,a.menu=[],a._windowObject=b._windowObject,a.xtype="wljinnermenuitem"}),this.menu=this.isLeaf?!1:a,Wlj.widgets.search.window.InnerMenu.superclass.initComponent.call(this)},handler:function(){this.ACTION&&Wlj.ServiceMgr.findServiceByID(this.ID).execute()}}),Ext.reg("wljinnermenuitem",Wlj.widgets.search.window.InnerMenu),Wlj.widgets.search.window.TaskThumberContainer=Ext.extend(Ext.Window,{layout:"fit",height:300,width:400,hidden:!0,titleTmp:"功能：【{0}】共{1}条记录，当前第{2}至{3}条",setTask:function(a){var c,d,b=a.getGridThumber();return b?(this.buildContent(b),c=a.el.getXY(),c[1]-=300,this.setPosition.apply(this,c),d=String.format(this.titleTmp,a.name,b.store.totalLength,b.store.lastOptions.params.start+1,b.store.lastOptions.params.start+b.store.lastOptions.params.limit),this.setTitle(d),void 0):!1},buildContent:function(a){var c,b=[];a.fields.each(function(c){var d={};d.header=c.text,d.dataIndex=c.name,d.width=c.width?c.width:80,d.translateType=c.translateType,c.translateType&&(d.renderer=function(b){return a.twindow.translateLookupByKey(this.translateType,b)}),b.push(d)}),c=new Ext.grid.GridPanel({store:a.store,columns:b,layout:"fit"}),this.removeAll(),this.add(c),this.doLayout()},hide:function(){Wlj.widgets.search.window.TaskThumberContainer.superclass.hide.call(this)}}),Ext.reg("wljthumbercontainer",Wlj.widgets.search.window.TaskThumberContainer),Ext.ns("Wlj.widgets.search.service"),Wlj.widgets.search.service.PageService=function(a){this.menuData=a,Wlj.widgets.search.service.PageService.superclass.constructor.call(this,this.createActionCfg()),this.id="service_"+this.menuData.ID,Wlj.ServiceMgr.addService(this)},Ext.extend(Wlj.widgets.search.service.PageService,Ext.Action,{serviceItem:!1,createActionCfg:function(){var a={};return a.itemId="service_"+this.menuData.ID,a.text=this.menuData.NAME,a.handler=Ext.emptyFn,a},execute:function(){var a=this.menuData.ACTION.indexOf("http://")>=0?this.menuData.ACTION:basepath+this.menuData.ACTION,b="task_"+this.menuData.ID;"1"==this.menuData.ISSAMEWIN?window.open(a,b):_APP.openWindow({name:this.menuData.NAME,action:a,resId:this.menuData.ID,id:b,serviceObject:this})},paddingFlag:function(a){this.serviceItem.paddingFlag(a)}}),Wlj.widgets.search.service.PageServiceItem=Ext.extend(Wlj.widgets.search.tile.Tile,{serviceObject:!1,removeable:!1,baseSize:64,baseMargin:3,cls:"tile_c1",position:"relative","float":"left",dragable:!1,initComponent:function(){return Wlj.widgets.search.service.PageServiceItem.superclass.initComponent.call(this),this.serviceObject?(this.html=this.serviceObject.menuData.NAME,this.serviceObject.serviceItem=this,void 0):!1},paddingFlag:function(a){a?(this.cls="",this.el&&this.el.removeClass("tile_c1")):(this.cls="tile_c1",this.el&&this.el.addClass("tile_c1"))}}),Wlj.widgets.search.service.PageServiceContainer=Ext.extend(Ext.Container,{autoEl:{tag:"div",style:{height:"100%"}}}),Wlj.widgets.search.service.DataService=Ext.extend(Ext.Action,{constructor:function(a){Wlj.widgets.search.service.DataService.superclass.constructor.call(this,a)},execute:function(){}}),Ext.ns("Wlj.widgets.search.plugin"),Wlj.widgets.search.plugin.ExtraTileCfg={},Wlj.widgets.search.plugin.ExtraTileContainer=Ext.extend(Ext.Container,{autoEl:{tag:"div",cls:"yc-chartContainer yc-chartList"},layout:"column",defaults:{columnWidth:.5},onRender:function(a,b){Wlj.widgets.search.plugin.ExtraTileContainer.superclass.onRender.call(this,a,b),this.el.applyStyles({zIndex:15e3})},afterRender:function(){Wlj.widgets.search.plugin.ExtraTileContainer.superclass.afterRender.call(this),this.loadCfg(),this.doLayout()},loadCfg:function(){}}),Wlj.widgets.search.plugin.ExtraItem=Ext.extend(Ext.Container,{autoEl:{tag:"div"},jsUrl:!1,sizeCode:!1,appObject:!1,chartTpl:new Ext.XTemplate('<div class="yc-chartDiv" title="{moduleName}">{moduleName}</div>'),initComponent:function(){Wlj.widgets.search.plugin.ExtraItem.superclass.initComponent.call(this),this.sizeCode&&(this.tileSize=this.appObject.translateSize(this.sizeCode))},onRender:function(a,b){Wlj.widgets.search.plugin.ExtraItem.superclass.onRender.call(this,a,b),this.chartTpl.append(this.el,{moduleName:this.moduleName}),this.createDD()},createTileCfg:function(a){var b={};return b.jsUrl=this.jsUrl,b.pos_size={},Ext.apply(b.pos_size,this.tileSize),b.pos_size.TX=a.POS_X,b.pos_size.TY=a.POS_Y,b.appObject=this.appObject,b.menuData=!1,b.tileManaged=!0,b.tileSize=this.sizeCode,b.baseWidth=this.appObject.defaultIndexTileWidthUnit,b.baseHeight=this.appObject.defaultIndexTileHeightUnit,b.baseMargin=this.appObject.defaultIndexTileMarginUnit,b.ownerW=this.appObject.defaultTileGroupOwnerW,b.ownerH=this.appObject.defaultTileGroupOwnerH,b.tileLogo="ico-t-"+Math.floor(100*Math.random()+1),b.tileColor="tile_c"+Math.floor(10*Math.random()+1),b.autoEl={tag:"div",cls:"tile "+b.tileColor},b},createGhost:function(a,b,c){var k,d=this.tileSize?this.tileSize:{TW:1,TH:1},e=d.TW,f=d.TH,g=document.createElement("div"),h=this.appObject.defaultIndexTileWidthUnit,i=this.appObject.defaultIndexTileHeightUnit,j=this.appObject.defaultIndexTileMarginUnit;return g.style.width=e*h+8*(e-1),g.style.height=f*i+8*(f-1),g.className="x-panel-ghost "+(a?a:""),this.header&&g.appendChild(this.tileTemplate.apply()),Ext.fly(g.appendChild(document.createElement("ul"))).setHeight(f*i+2*j*(f-1)),g.style.width=e*h+2*j*(e-1)+"px",c?Ext.getDom(c).appendChild(g):this.container.dom.appendChild(g),b!==!1&&this.el.shim!==!1?(k=new Ext.Layer({shadow:!1,useDisplay:!0,constrain:!1},g),k.show(),k):new Ext.Element(g)},createDD:function(){this.dd=new Wlj.widgets.search.plugin.ExtraItem.DD(this,{ddGroup:"tileDrop"})}}),Wlj.widgets.search.plugin.ExtraItem.ExtraProxy=Ext.extend(Object,{constructor:function(a,b){this.plugin=a,this.id=this.plugin.id+"-ddproxy",Ext.apply(this,b)},insertProxy:!1,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){this.ghost&&(this.proxy&&(this.proxy.remove(),delete this.proxy),this.ghost.remove(),delete this.ghost)},show:function(){this.ghost||(this.ghost=this.plugin.createGhost(this.plugin.initialConfig.cls,void 0,Ext.getBody()),this.ghost.setXY(this.plugin.el.getXY()))},repair:function(a,b,c){this.hide(),"function"==typeof b&&b.call(c||this)},moveProxy:function(){}}),Wlj.widgets.search.plugin.ExtraItem.DD=Ext.extend(Ext.dd.DragSource,{constructor:function(a,b){this.plugin=a,this.dragData={plugin:a},this.proxy=new Wlj.widgets.search.plugin.ExtraItem.ExtraProxy(a,b),Wlj.widgets.search.plugin.ExtraItem.DD.superclass.constructor.call(this,a.el,b);var c=a.header,d=a.el;c&&(this.setHandleElId(c.id),d=a.header),this.scroll=!1},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(){this.proxy.show()},b4MouseDown:function(a){var b=a.getPageX(),c=a.getPageY();this.autoOffset(b,c)},onInitDrag:function(a,b){return this.onStartDrag(a,b),!0},createFrame:Ext.emptyFn,getDragEl:function(){return this.proxy.ghost.dom},endDrag:function(){this.proxy.hide(),this.plugin.el.dom.style.visibility=""},autoOffset:function(a,b){a-=this.startPageX,b-=this.startPageY,this.setDelta(a,b)},onDrag:function(){}}),indexTileExtraData=[{moduleId:"md-112440",moduleName:"机构存款趋势图",jsUrl:"/contents/pages/wlj/individualManager/orgDepMonth.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-112442",moduleName:"机构存款趋势图30天",jsUrl:"/contents/pages/wlj/individualManager/orgDepDay.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-112444",moduleName:"机构贷款趋势图",jsUrl:"/contents/pages/wlj/individualManager/orgCreMonth.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-112450",moduleName:"机构贷款趋势图30天",jsUrl:"/contents/pages/wlj/individualManager/orgCreDay.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-112633",moduleName:"机构资金净流出TOP10",jsUrl:"/contents/pages/wlj/individualManager/orgCustOutcomeTopN.js",sizeCode:"TS_01",menuData:!1},{moduleId:"md-112687",moduleName:"机构存款客户TOP10",jsUrl:"/contents/pages/wlj/individualManager/orgCustDepTopN.js",sizeCode:"TS_01",menuData:!1},{moduleId:"md-112689",moduleName:"机构贷款客户TOP10",jsUrl:"/contents/pages/wlj/individualManager/orgCustCreTopN.js",sizeCode:"TS_01",menuData:!1},{moduleId:"md-112691",moduleName:"机构资金净流入TOP10",jsUrl:"/contents/pages/wlj/individualManager/orgCustIncomeTopN.js",sizeCode:"TS_01",menuData:!1},{moduleId:"md-112799",moduleName:"机构客户数",jsUrl:"/contents/pages/wlj/individualManager/orgCustNum.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-112801",moduleName:"客户经理客户数",jsUrl:"/contents/pages/wlj/individualManager/mgrCustNum.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-112861",moduleName:"机构贡献度时点占比",jsUrl:"/contents/pages/wlj/individualManager/orgContribute.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-112864",moduleName:"客户经理贡献度占比",jsUrl:"/contents/pages/wlj/individualManager/mgrContribute.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-113361",moduleName:"机构贡献度连续12个月",jsUrl:"/contents/pages/wlj/individualManager/orgContributeMonth.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-113363",moduleName:"客户经理贡献度连续12个月",jsUrl:"/contents/pages/wlj/individualManager/mgrContributeMonth.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-113893",moduleName:"机构可发贵宾卡客户",jsUrl:"/contents/pages/wlj/individualManager/orgCanCard.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-113895",moduleName:"客户经理可发贵宾卡客户",jsUrl:"/contents/pages/wlj/individualManager/mgrCanCard.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-113897",moduleName:"机构持有贵宾卡客户",jsUrl:"/contents/pages/wlj/individualManager/orgHoldCard.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-113899",moduleName:"客户经理持有贵宾卡客户",jsUrl:"/contents/pages/wlj/individualManager/mgrHoldCard.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-114080",moduleName:"机构存款产品占比（时点）",jsUrl:"/contents/pages/wlj/individualManager/orgDepRate.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-114082",moduleName:"机构存款产品占比（月均）",jsUrl:"/contents/pages/wlj/individualManager/orgDepRateMonth.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-114084",moduleName:"机构贷款产品占比（时点）",jsUrl:"/contents/pages/wlj/individualManager/orgCreRate.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-114086",moduleName:"机构贷款产品占比（月均）",jsUrl:"/contents/pages/wlj/individualManager/orgCreRateMonth.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-114088",moduleName:"客户经理存款产品占比（时点）",jsUrl:"/contents/pages/wlj/individualManager/mgrDepRate.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-114090",moduleName:"客户经理存款产品占比（月均）",jsUrl:"/contents/pages/wlj/individualManager/mgrDepRateMonth.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-114092",moduleName:"客户经理贷款产品占比（时点）",jsUrl:"/contents/pages/wlj/individualManager/mgrCreRate.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-114094",moduleName:"客户经理贷款产品占比（月均）",jsUrl:"/contents/pages/wlj/individualManager/mgrCreRateMonth.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-114122",moduleName:"机构贷款客户增长TOP10",jsUrl:"/contents/pages/wlj/individualManager/orgCreAddTopN.js",sizeCode:"TS_01",menuData:!1},{moduleId:"md-114124",moduleName:"机构贷款客户减少TOP10",jsUrl:"/contents/pages/wlj/individualManager/orgCreSubTopN.js",sizeCode:"TS_01",menuData:!1},{moduleId:"md-114126",moduleName:"机构存款流入客户TOP10",jsUrl:"/contents/pages/wlj/individualManager/orgDepAddTopN.js",sizeCode:"TS_01",menuData:!1},{moduleId:"md-114128",moduleName:"机构存款流出客户TOP10",jsUrl:"/contents/pages/wlj/individualManager/orgDepSubTopN.js",sizeCode:"TS_01",menuData:!1},{moduleId:"md-117179",moduleName:"客户经理所辖客户等级占比",jsUrl:"/contents/pages/wlj/individualManager/mgrCustLevelRate.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-117170",moduleName:"机构所辖客户等级占比",jsUrl:"/contents/pages/wlj/individualManager/orgCustLevelRate.js",sizeCode:"TS_03",menuData:!1},{moduleId:"md-117171",moduleName:"客户分布(对公)",jsUrl:"/contents/pages/wlj/productManager/custProductflow.js",sizeCode:"TS_00",menuData:!1},{moduleId:"md-117172",moduleName:"客户分布(对私)",jsUrl:"/contents/pages/wlj/productManager/custProductflowPer.js",sizeCode:"TS_00",menuData:!1},{moduleId:"searchComponent",moduleName:"查询",jsUrl:"/contents/pages/testtiles/custSearchTile.js",sizeCode:"TS_05",menuData:!1}],indexTileExtra=Ext.extend(Wlj.widgets.search.plugin.ExtraTileContainer,{loadCfg:function(){var a=this;Ext.each(indexTileExtraData,function(b){b.appObject=a.appObject,a.add(new indexTileExtraItem(b))})}}),indexTileExtraItem=Ext.extend(Wlj.widgets.search.plugin.ExtraItem,{tileManaged:!0}),Ext.ns("Wlj.widgets.views.index.grid"),Wlj.widgets.views.index.grid.TileGrid=Ext.extend(Ext.DataView,{dataSize:7,title:"TileGrid",root:"json.data",columns:!1,url:!1,emptyText:"sfd",exceptionText:"数据服务异常",itemSelector:"div.w2h2",emptyInnerText:"暂无数据",initComponent:function(){var a=this.columns,b=[],c=!1,d=this;Ext.each(a,function(a){b.push(a.columnName),a.key===!0&&(c=a.columnName),a.convert?b.push({name:a.columnName,convert:a.convert}):b.push(a.columnName)}),this.store=this.url&&this.columns?new Ext.data.JsonStore({autoDestroy:!0,url:this.url,root:this.root,restful:!0,idProperty:c,fields:b,listeners:{exception:function(){d.exceptionTpl.append(d.el)}}}):new Ext.data.ArrayStore({autoDestroy:!0,fields:["company"]}),this.createTemplate(),this.createExceptionTempalte(),this.emptyTextCreate(),Wlj.widgets.views.index.grid.TileGrid.superclass.initComponent.call(this)},createExceptionTempalte:function(){var b="";b+='<div class="w2h2" >',b+=this.titleHTML(),b+='<div class="tile_notice_list tile_content">',b+='<ul class="in_sys_ul">',b+="<li>",b+='<div class="in_sys_line">',b+='<p class="in_sys_p">',b+='<span class="time">',b+=this.exceptionText,b+="</span>",b+="</p>",b+="</div>",b+="</li>",b+="</ul>",b+="</div>",b+="</div>",this.exceptionTpl=new Ext.XTemplate(b)},emptyTextCreate:function(){var c,a=this;a.title,c="",c+='<div class="w2h2" >',c+=this.titleHTML(),c+='<div class="tile_notice_list tile_content">',c+='<ul class="in_sys_ul">',c+="<li>",c+='<div class="in_sys_line">',c+='<p class="in_sys_p">',c+='<span class="time">',c+=this.emptyInnerText,c+="</span>",c+="</p>",c+="</div>",c+="</li>",c+="</ul>",c+="</div>",c+="</div>",this.emptyText=c},titleHTML:function(){var b=this.title,c="";return c+='<div class="tile_tip_tit" >',c+='<p class="tit" >',c+="<span class=icon>",c+=b,c+="</span>",c+="</p>",c+="</div>"},createTemplate:function(){var f,a=this,b=a.title,c=this.columns,d=[],e="";e+='<div class="w2h2" >',e+=this.titleHTML(),this.url&&this.columns&&(Ext.each(c,function(a){a.show&&d.push(a)}),e+='<div class="tile_notice_list tile_content">',e+='<ul class="in_sys_ul">',e+='<tpl for=".">',e+="<li>",e+='<div class="in_sys_line">',e+='<p class="in_sys_p">',e+='<span class="time">',f=d.shift(),e+="{"+f.columnName+"}",e+="</span>",e+='<span class="type_red">',e+="</span>",b=d.shift(),b&&b.columnName&&(e+='<a title="{'+b.columnName+'}" href="javascript:void(0);" class="tit">',e+="{"+b.columnName+"}",e+="</a>"),e+="</p>",e+="</div>",e+="</li>",e+="</tpl>",e+="</ul>",e+="</div>"),e+="</div>",this.tpl=new Ext.XTemplate(e)},listeners:{afterrender:function(){this.url&&this.columns?Wlj.TileMgr.addDataCfg({controlPanel:this,store:this.store}):this.tpl.append(this.el);var a=this;this.el.on("click",function(){a.ownerCt.clickFire()})}}}),Wlj.widgets.views.index.grid.MaxTileGrid=Ext.extend(Ext.DataView,{needheader:!1,dataSize:7,title:"MaxTileGrid",root:"json.data",columns:!1,url:!1,emptyText:"sfd",exceptionText:"数据服务异常",emptyInnerText:"暂无数据",itemSelector:"div.w3h3",initComponent:function(){var a=this.columns,b=[],c=!1;Ext.each(a,function(a){a.key===!0&&(c=a.columnName),a.convert?b.push({name:a.columnName,convert:a.convert}):b.push(a.columnName)}),this.store=this.url&&this.columns?new Ext.data.JsonStore({autoDestroy:!0,url:this.url,root:this.root,restful:!0,idProperty:c,fields:b,listeners:{exception:function(){_this.exceptionTpl.append(_this.el)}}}):new Ext.data.ArrayStore({autoDestroy:!0,fields:["company"]}),this.createTemplate(),this.createExceptionTempalte(),this.emptyTextCreate(),Wlj.widgets.views.index.grid.MaxTileGrid.superclass.initComponent.call(this)},titleHTML:function(){var b=this.title,c="";return c+='<div class="tile_grid_tit" >',c+='<p class="tit" >',c+="<span class=icon>",c+=b,c+="</span>",c+="</p>",c+="</div>"},createExceptionTempalte:function(){var b="";b+='<div class="w3h3" >',b+=this.titleHTML(),b+='<div class="tile_grid_list tile_content">',b+='<ul class="in_sys_ul">',b+="<li>",b+='<div class="in_sys_line">',b+='<p class="in_sys_p">',b+='<span class="time">',b+=this.exceptionText,b+="</span>",b+="</p>",b+="</div>",b+="</li>",b+="</ul>",b+="</div>",b+="</div>",this.exceptionTpl=new Ext.XTemplate(b)},emptyTextCreate:function(){var c,a=this;a.title,c="",c+='<div class="w3h3" >',c+=this.titleHTML(),c+='<div class="tile_grid_list tile_content">',c+='<ul class="in_sys_ul">',c+="<li>",c+='<div class="in_sys_line">',c+='<p class="in_sys_p">',c+='<span class="time">',c+=this.emptyInnerText,c+="</span>",c+="</p>",c+="</div>",c+="</li>",c+="</ul>",c+="</div>",c+="</div>",this.emptyText=c},createTemplate:function(){var c,d,e,f,g,a=this;if(a.title,c=this.columns,d=[],e="",e+='<div class="w3h3" >',e+=this.titleHTML(),this.url&&this.columns){if(Ext.each(c,function(a){a.width=a.width?a.width:100,a.align=a.align?a.align:"left",a.show&&d.push(a)}),e+='<div class="tile_grid_list tile_content" >',e+='<ul class="in_sys_ul">',this.needheader){for(e+="<li>",e+='<div class="in_sys_line">',e+='<p class="in_sys_p">',f=0;f<d.length;f++)g=d[f],f>0&&(e+='<span class="type_red"></span>'),g&&g.header&&(e+='<a title="'+g.header+'" class="tit" style="width:'+g.width+'px;display:inline;">'+g.header+"</a>");e+="</p>",e+="</div>",e+="</li>"}for(e+='<tpl for=".">',e+="<li>",e+='<div class="in_sys_line">',e+='<p class="in_sys_p">',f=0;f<d.length;f++)g=d[f],f>0&&(e+='<span class="type_red"></span>'),g&&g.columnName&&(e+='<a title="{'+g.columnName+'}" href="javascript:void(0);" class="tit" style="width:'+g.width+"px;display:inline;text-align:"+g.align+';">{'+g.columnName+"}</a>");e+="</p>",e+="</div>",e+="</li>",e+="</tpl>",e+="</ul>",e+="</div>"}e+="</div>",this.tpl=new Ext.XTemplate(e)},listeners:{afterrender:function(){this.url&&this.columns?Wlj.TileMgr.addDataCfg({controlPanel:this,store:this.store}):this.tpl.append(this.el);var a=this;this.el.on("click",function(){a.ownerCt.clickFire()})},beforedestroy:function(){for(var b=0;b<Wlj.TileMgr.tilesData.getCount();b++)if(Wlj.TileMgr.tilesData.get(b).controlPanel===this)return Wlj.TileMgr.tilesData.removeAt(b),!0;return!0}}});